"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"function"==typeof require&&"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module))?e(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],e):e(ko,ko.mapping={})}(function(e,r){function t(e,n){var a,o;for(o in n)if(n.hasOwnProperty(o)&&n[o])if(a=r.getType(e[o]),o&&e[o]&&"array"!==a&&"string"!==a)t(e[o],n[o]);else if("array"===r.getType(e[o])&&"array"===r.getType(n[o])){a=e;for(var i=o,u=e[o],s=n[o],p={},f=u.length-1;0<=f;--f)p[u[f]]=u[f];for(f=s.length-1;0<=f;--f)p[s[f]]=s[f];u=[],s=void 0;for(s in p)u.push(p[s]);a[i]=u}else e[o]=n[o]}function n(e,r){var n={};return t(n,e),t(n,r),n}function a(e,r){for(var t=n({},e),a=m.length-1;0<=a;a--){var i=m[a];t[i]&&(t[""]instanceof Object||(t[""]={}),t[""][i]=t[i],delete t[i])}return r&&(t.ignore=o(r.ignore,t.ignore),t.include=o(r.include,t.include),t.copy=o(r.copy,t.copy),t.observe=o(r.observe,t.observe)),t.ignore=o(t.ignore,T.ignore),t.include=o(t.include,T.include),t.copy=o(t.copy,T.copy),t.observe=o(t.observe,T.observe),t.mappedProperties=t.mappedProperties||{},t.copiedProperties=t.copiedProperties||{},t}function o(t,n){return"array"!==r.getType(t)&&(t="undefined"===r.getType(t)?[]:[t]),"array"!==r.getType(n)&&(n="undefined"===r.getType(n)?[]:[n]),e.utils.arrayGetDistinctValues(t.concat(n))}function i(t,a,o,s,c,v,h){var m="array"===r.getType(e.utils.unwrapObservable(a));if(v=v||"",r.isMapped(t)){var k=e.utils.unwrapObservable(t)[g];o=n(k,o)}var T=h||c,x=function(){return o[s]&&o[s].create instanceof Function},S=function(r){var t=b,n=e.dependentObservable;return e.dependentObservable=function(r,n,a){a=a||{},r&&"object"==(void 0===r?"undefined":_typeof(r))&&(a=r);var o=a.deferEvaluation,i=!1;if(a.deferEvaluation=!0,r=new O(r,n,a),!o){var u=r,o=e.dependentObservable;e.dependentObservable=O,r=e.isWriteableObservable(u),e.dependentObservable=o,o=O({read:function(){return i||(e.utils.arrayRemoveItem(t,u),i=!0),u.apply(u,arguments)},write:r&&function(e){return u(e)},deferEvaluation:!0}),o.__DO=u,r=o,t.push(r)}return r},e.dependentObservable.fn=O.fn,e.computed=e.dependentObservable,r=e.utils.unwrapObservable(c)instanceof Array?o[s].create({data:r||a,parent:T,skip:w}):o[s].create({data:r||a,parent:T}),e.dependentObservable=n,e.computed=e.dependentObservable,r},_=function(){return o[s]&&o[s].update instanceof Function},j=function(r,t){var n={data:t||a,parent:T,target:e.utils.unwrapObservable(r)};return e.isWriteableObservable(r)&&(n.observable=r),o[s].update(n)};if(h=y.get(a))return h;if(s=s||"",m){var m=[],I=!1,J=function(e){return e};o[s]&&o[s].key&&(J=o[s].key,I=!0),e.isObservable(t)||(t=e.observableArray([]),t.mappedRemove=function(e){var r="function"==typeof e?e:function(r){return r===J(e)};return t.remove(function(e){return r(J(e))})},t.mappedRemoveAll=function(r){var n=f(r,J);return t.remove(function(r){return-1!=e.utils.arrayIndexOf(n,J(r))})},t.mappedDestroy=function(e){var r="function"==typeof e?e:function(r){return r===J(e)};return t.destroy(function(e){return r(J(e))})},t.mappedDestroyAll=function(r){var n=f(r,J);return t.destroy(function(r){return-1!=e.utils.arrayIndexOf(n,J(r))})},t.mappedIndexOf=function(r){var n=f(t(),J);return r=J(r),e.utils.arrayIndexOf(n,r)},t.mappedGet=function(e){return t()[t.mappedIndexOf(e)]},t.mappedCreate=function(r){if(-1!==t.mappedIndexOf(r))throw Error("There already is an object with the key that you specified.");var n=x()?S(r):r;return _()&&(r=j(n,r),e.isWriteableObservable(n)?n(r):n=r),t.push(n),n}),h=f(e.utils.unwrapObservable(t),J).sort(),k=f(a,J),I&&k.sort(),I=e.utils.compareArrays(h,k),h={};var E,P=e.utils.unwrapObservable(a),N={},W=!0,k=0;for(E=P.length;k<E;k++){var D=J(P[k]);if(void 0===D||D instanceof Object){W=!1;break}N[D]=P[k]}var P=[],F=0,k=0;for(E=I.length;k<E;k++){var A,D=I[k],M=v+"["+k+"]";switch(D.status){case"added":var C=W?N[D.value]:p(e.utils.unwrapObservable(a),D.value,J);A=i(void 0,C,o,s,t,M,c),x()||(A=e.utils.unwrapObservable(A)),M=u(e.utils.unwrapObservable(a),C,h),A===w?F++:P[M-F]=A,h[M]=!0;break;case"retained":C=W?N[D.value]:p(e.utils.unwrapObservable(a),D.value,J),A=p(t,D.value,J),i(A,C,o,s,t,M,c),M=u(e.utils.unwrapObservable(a),C,h),P[M]=A,h[M]=!0;break;case"deleted":A=p(t,D.value,J)}m.push({event:D.status,item:A})}t(P),o[s]&&o[s].arrayChanged&&e.utils.arrayForEach(m,function(e){o[s].arrayChanged(e.event,e.item)})}else if(d(a)){if(!(t=e.utils.unwrapObservable(t))){if(x())return I=S(),_()&&(I=j(I)),I;if(_())return j(I);t={}}if(_()&&(t=j(t)),y.save(a,t),_())return t;l(a,function(r){var n=v.length?v+"."+r:r;if(-1==e.utils.arrayIndexOf(o.ignore,n))if(-1!=e.utils.arrayIndexOf(o.copy,n))t[r]=a[r];else if("object"!=_typeof(a[r])&&"array"!=typeof a[r]&&0<o.observe.length&&-1==e.utils.arrayIndexOf(o.observe,n))t[r]=a[r],o.copiedProperties[n]=!0;else{var u=y.get(a[r]),s=i(t[r],a[r],o,r,t,n,t),u=u||s;0<o.observe.length&&-1==e.utils.arrayIndexOf(o.observe,n)?(t[r]=u(),o.copiedProperties[n]=!0):(e.isWriteableObservable(t[r])?(u=e.utils.unwrapObservable(u),t[r]()!==u&&t[r](u)):(u=void 0===t[r]?u:e.utils.unwrapObservable(u),t[r]=u),o.mappedProperties[n]=!0)}})}else switch(r.getType(a)){case"function":_()?e.isWriteableObservable(a)?(a(j(a)),t=a):t=j(a):t=a;break;default:if(e.isWriteableObservable(t))return A=_()?j(t):e.utils.unwrapObservable(a),t(A),A;x()||_(),t=x()?S():e.observable(e.utils.unwrapObservable(a)),_()&&t(j(t))}return t}function u(e,r,t){for(var n=0,a=e.length;n<a;n++)if(!0!==t[n]&&e[n]===r)return n;return null}function s(t,n){var a;return n&&(a=n(t)),"undefined"===r.getType(a)&&(a=t),e.utils.unwrapObservable(a)}function p(r,t,n){r=e.utils.unwrapObservable(r);for(var a=0,o=r.length;a<o;a++){var i=r[a];if(s(i,n)===t)return i}throw Error("When calling ko.update*, the key '"+t+"' was not found!")}function f(r,t){return e.utils.arrayMap(e.utils.unwrapObservable(r),function(e){return t?s(e,t):e})}function l(e,t){if("array"===r.getType(e))for(var n=0;n<e.length;n++)t(n);else for(n in e)t(n)}function d(e){var t=r.getType(e);return("object"===t||"array"===t)&&null!==e}function c(){var r=[],t=[];this.save=function(n,a){var o=e.utils.arrayIndexOf(r,n);0<=o?t[o]=a:(r.push(n),t.push(a))},this.get=function(n){return n=e.utils.arrayIndexOf(r,n),0<=n?t[n]:void 0}}function v(){var e={},r=function r(t){var r;try{r=t}catch(e){r="$$$"}return t=e[r],void 0===t&&(t=new c,e[r]=t),t};this.save=function(e,t){r(e).save(e,t)},this.get=function(e){return r(e).get(e)}}var b,y,g="__ko_mapping__",O=e.dependentObservable,h=0,m=["create","update","key","arrayChanged"],w={},k={include:["_destroy"],ignore:[],copy:[],observe:[]},T=k;r.isMapped=function(r){return(r=e.utils.unwrapObservable(r))&&r[g]},r.fromJS=function(e){if(0==arguments.length)throw Error("When calling ko.fromJS, pass the object you want to convert.");try{h++||(b=[],y=new v);var r,t;2==arguments.length&&(arguments[1][g]?t=arguments[1]:r=arguments[1]),3==arguments.length&&(r=arguments[1],t=arguments[2]),t&&(r=n(r,t[g])),r=a(r);var o=i(t,e,r);if(t&&(o=t),!--h)for(;b.length;){var u=b.pop();u&&(u(),u.__DO.throttleEvaluation=u.throttleEvaluation)}return o[g]=n(o[g],r),o}catch(e){throw h=0,e}},r.fromJSON=function(t){var n=e.utils.parseJson(t);return arguments[0]=n,r.fromJS.apply(this,arguments)},r.updateFromJS=function(){throw Error("ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!")},r.updateFromJSON=function(){throw Error("ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!")},r.toJS=function(t,n){if(T||r.resetDefaultOptions(),0==arguments.length)throw Error("When calling ko.mapping.toJS, pass the object you want to convert.");if("array"!==r.getType(T.ignore))throw Error("ko.mapping.defaultOptions().ignore should be an array.");if("array"!==r.getType(T.include))throw Error("ko.mapping.defaultOptions().include should be an array.");if("array"!==r.getType(T.copy))throw Error("ko.mapping.defaultOptions().copy should be an array.");return n=a(n,t[g]),r.visitModel(t,function(r){return e.utils.unwrapObservable(r)},n)},r.toJSON=function(t,n){var a=r.toJS(t,n);return e.utils.stringifyJson(a)},r.defaultOptions=function(){if(!(0<arguments.length))return T;T=arguments[0]},r.resetDefaultOptions=function(){T={include:k.include.slice(0),ignore:k.ignore.slice(0),copy:k.copy.slice(0)}},r.getType=function(e){if(e&&"object"===(void 0===e?"undefined":_typeof(e))){if(e.constructor===Date)return"date";if(e.constructor===Array)return"array"}return void 0===e?"undefined":_typeof(e)},r.visitModel=function(t,n,o){o=o||{},o.visitedObjects=o.visitedObjects||new v;var i,u=e.utils.unwrapObservable(t);if(!d(u))return n(t,o.parentName);o=a(o,u[g]),n(t,o.parentName),i="array"===r.getType(u)?[]:{},o.visitedObjects.save(t,i);var s=o.parentName;return l(u,function(t){if(!o.ignore||-1==e.utils.arrayIndexOf(o.ignore,t)){var a=u[t],p=o,f=s||"";if("array"===r.getType(u)?s&&(f+="["+t+"]"):(s&&(f+="."),f+=t),p.parentName=f,-1!==e.utils.arrayIndexOf(o.copy,t)||-1!==e.utils.arrayIndexOf(o.include,t)||!u[g]||!u[g].mappedProperties||u[g].mappedProperties[t]||!u[g].copiedProperties||u[g].copiedProperties[t]||"array"===r.getType(u))switch(r.getType(e.utils.unwrapObservable(a))){case"object":case"array":case"undefined":p=o.visitedObjects.get(a),i[t]="undefined"!==r.getType(p)?p:r.visitModel(a,n,o);break;default:i[t]=n(a,o.parentName)}}}),i}});
//# sourceMappingURL=knockout.mapping.2.4.1.min.js.map
