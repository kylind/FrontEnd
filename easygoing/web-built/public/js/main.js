"use strict";var _slicedToArray=function(){function e(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();define("ReceivedOrders",["common"],function(e){var t=e.$,n=e.ko;n.mapping=e.mapping;var r=function(e){var t=this;t.name=n.observable(e&&e.name?e.name:""),t.quantity=n.observable(e&&e.quantity?e.quantity:"1"),t.note=n.observable(e&&e.note?e.note:""),t.buyPrice=e&&!isNaN(e.buyPrice)?e.buyPrice:"",t.sellPrice=e&&!isNaN(e.sellPrice)?e.sellPrice:"",t.profit=e&&e.profit?e.profit:"",t.isDone=!(!e||void 0===e.isDone)&&e.isDone,t.tag=e&&e.tag?e.tag:"",t.isChanged=!1,t.name.subscribe(function(e){t.isChanged=!0}),t.quantity.subscribe(function(e){t.isChanged=!0}),t.note.subscribe(function(e){t.isChanged=!0})},i=function(e){var i=this;i._id=n.observable(e&&e._id?e._id:""),i.client=n.observable(e&&e.client?e.client:""),i.packingStatus=n.observable(e&&e.packingStatus?e.packingStatus:"1ISREADY"),i.rate=e&&e.rate?e.rate:null,i.postage=e&&e.postage?e.postage:0,i.buyPrice=e&&e.buyPrice?e.buyPrice:"",i.sellPrice=e&&e.sellPrice?e.sellPrice:"",i.profit=e&&e.profit?e.profit:"",i.status=e&&e.status?e.status:"1RECEIVED",i.createDate=e&&e.createDate?e.createDate:"";var s=[];if(e&&t.isArray(e.items)&&e.items.length>0)e.items.forEach(function(e){s.push(new r(e))});else for(var a=0;a<3;a++)s.push(new r);i.items=n.observableArray(s),i.isChanged=!1,i.client.subscribe(function(e){i.isChanged=!0}),i.items.subscribe(function(e){i.isChanged=!0}),i.orderPackingStatus=n.pureComputed(function(){return"3PACKED"==i.packingStatus()?"font-green":"2NOTREADY"==i.packingStatus()?"font-yellow":"font-black"}),i.orderReadyStatus=n.pureComputed(function(){return"2NOTREADY"==i.packingStatus()?"icon-thumbsdown font-yellow":"icon-thumbsup font-black"})};return function(e,s){function a(e){var t=[];if(Array.isArray(e)&&e.length>0)e.forEach(function(e){t.push(new i(e))});else for(var n=0;n<30;n++)t.push(new i);return t}function o(e){e.sort(function(e,t){var n=e.packingStatus(),r=t.packingStatus();return n==r?e.createDate<=t.createDate?1:-1:n<r?-1:1})}var u=s,c=this;c.setSwiper=function(e){u=e,u.update()};var d=a(e);c.orders=n.observableArray(d),c.setOrders=function(e,t){c.orders(a(e)),u.update()},c.addItem=function(e){e.items.unshift({name:"",quantity:1,note:"",buyPrice:"",sellPrice:"",isDone:!1}),u.update()},c.removeItem=function(e,t){t.items.remove(e),u.update()},c.submitOrder=function(e){arguments[3]();var r=arguments[4];console.log("post request....");var i=n.mapping.toJS(e);return t.post("./order",i,function(t,i){console.log("get post result"),n.mapping.fromJS(t,{},e),r()},"json"),!1},c.submitOrders=function(){arguments[3]();var e=arguments[4],i=c.orders(),s=t.parseJSON(n.toJSON(i));if(Array.isArray(s)&&s.length>0){var a=[],o=s.filter(function(e,t){var n=!1;if(""!=e.client)if(e.isChanged)n=!0;else for(var r=0;r<e.items.length;r++)if(e.items[r].isChanged){n=!0;break}return n&&a.push(t),n});o.length>0?t.post("./orders",{orders:o},function(s,o){s.forEach(function(e,s){var o=a[s];t.isArray(e.items)&&0==e.items.length&&(e.items=[{},{},{}]),n.mapping.fromJS(e,{items:{create:function(e){return new r(e.data)}}},i[o]),i[o].isChanged=!1}),e()},"json"):e()}return!1},c.markPackingStatus=function(e){arguments[3]();var n=arguments[4],r=(arguments[1],e._id()),i=e.packingStatus(),s=t(arguments[2].target),a="";if(s.hasClass("icon-leaf")?"1ISREADY"==i?a="3PACKED":"3PACKED"==i&&(a="1ISREADY"):a="1ISREADY"==i||"3PACKED"==i?"2NOTREADY":"1ISREADY",""==a)return void n();t.ajax("./packingStatus/"+r,{success:function(r,i){if(e.packingStatus(a),""==t("#search-receivedOrders").val()){var s=c.orders();o(s),c.orders(s)}n()},data:{packingStatus:a},dataType:"json",type:"PUT"})},c.addOrder=function(){var e=new i;c.orders.unshift(e),u.update(),t(window).scrollTop(0)},c.removeOrder=function(e){arguments[3]();var n=arguments[4],r=e._id();if(c.orders.remove(e),""==r)return void n();t.ajax("./order/"+r,{success:function(e,t){n()},dataType:"json",type:"DELETE"}),u.update()};var e=null;c.searchOrders=function(n,r){var i=t(r.target).val();if(null==e&&(e=c.orders()),""==i){o(e);var s=e}else var s=e.filter(function(e){return e.client().indexOf(i)>=0});c.orders(s),setTimeout(function(){u.update()},100)},c.afterRender=function(){u.update(),t(".mask").removeClass("isShow")}}}),define("ItemsModel",["common"],function(e){var t=e.$,n=e.ko;n.mapping=e.mapping;var r=function(e){var t=this;t._id=e._id,t.client=e.client,t.name=e.name,t.note=e.note,t.quantity=e.quantity,t.isDone=n.observable(e.isDone)},i=function(e,i){function s(e){var t=e.findIndex(function(e){return e._id==a._id&&e.tag==a.tag()});t>-1&&(e[t]=n.mapping.toJS(a))}var a=this;a._id=e?e._id:"",a.quantity=e?e.quantity:"",a.tag=n.observable(e&&e.tag?e.tag:""),a.purchaseDetail=n.observableArray(e?e.purchaseDetail:[]),a.subItems=n.observableArray([]),a.updateSubItems=function(e){var t=[];Array.isArray(e)&&e.length>0&&e.forEach(function(e){t.push(new r(e))}),a.subItems(t)},a.hasItemDetail=function(e){return a.subItems().length>0},a.restCount=n.pureComputed(function(){var e=a.purchaseDetail(),t=0,n=0;return e.forEach(function(e){e.isDone?t=e.quantity:n=e.quantity}),t<a.quantity&&0!=t?a.quantity-t:""}),a.displaySubItems=n.pureComputed(function(){return a.subItems().length>0}),a.markDone=function(e,r,i){arguments[3]();var o=arguments[4],u=n.mapping.toJS(e),c=!0;u.purchaseDetail.forEach(function(e){e.isDone||(c=!1)}),t.post("./item",{itemTag:u.tag,itemName:u._id,isDone:!c},function(t,n){e.purchaseDetail(t.purchaseDetail),s(r.allItems);a.displaySubItems&&a.subItems().forEach(function(e){e.isDone(!c)}),o()},"json")},a.markItemStatus=function(){var e=a.purchaseDetail(),t=0,n=0;return e.forEach(function(e){e.isDone?t=e.quantity:n=e.quantity}),n==a.quantity?"":t==a.quantity?"font-green":"font-yellow"},a.markSubItemDone=function(e,r,i){arguments[3]();var o=arguments[4],u=arguments[5],c=n.mapping.toJS(e);c.isDone=!c.isDone,c.tag=r.tag(),t.post("./subitem",c,function(t,n){e.isDone(!e.isDone()),a.purchaseDetail(t.purchaseDetail),s(u.allItems),a.subItems().forEach(function(t){t.client==e.client&&t.isDone(e.isDone())}),o()},"json")},a.getSubName=function(e){return"item"+e.isDone},a.getSubItems=function(e,r,s){var o=n.mapping.toJS(e);if(e.isSubItemsOpen)t(s.target).parents(".orderitem-cnt").next().slideUp("fast",function(){e.isSubItemsOpen=!1,i.update()});else{arguments[3]();var u=arguments[4];t.getJSON("./subitems",{itemName:o._id,itemTag:o.tag},function(n,r){"success"==r?a.updateSubItems(n):e.subItems([]),t(s.target).parents(".orderitem-cnt").next().slideDown("fast",function(){e.isSubItemsOpen=!0,u()})})}},a.isSubItemsOpen=!1};return function(e,r){function s(e){var t="function"==typeof e.purchaseDetail?e.purchaseDetail():e.purchaseDetail,n=0,r=0;return t.forEach(function(e){e.isDone?n=e.quantity:r=e.quantity}),r==e.quantity?-1:n==e.quantity?1:0}function a(e,t){if(e.tag<t.tag)return-1;if(e.tag>t.tag)return 1;var n=s(e),r=s(t);if(n<r)return-1;if(n>r)return 1;var i=e._id.substr(0,1),a=t._id.substr(0,1);return i<a?-1:i>a?1:0}function o(e,t){var n=s(e),r=s(t);if(n<r)return-1;if(n>r)return 1;if(e.tag<t.tag)return-1;if(e.tag>t.tag)return 1;var i=e._id.substr(0,1),a=t._id.substr(0,1);return i<a?-1:i>a?1:0}function u(e,t,n){var s=[],u=[];return Array.isArray(e)&&e.length>0&&("status"==n?e.sort(o):e.sort(a),e.forEach(function(e){s.push(new i(e,r)),t&&u.indexOf(e.tag)<0&&e.tag&&u.push(e.tag)})),[s,u]}var c=this;c.allItems=[],c.tags=n.observableArray(),c.items=n.observableArray(),c.setItems=function(e,i,s){var a=!1;i&&(t(".link-tag.all").addClass("isActive"),a=!0);var o=u(e,a),d=_slicedToArray(o,2),e=d[0],f=d[1];c.items(e),i&&(c.tags(f),c.allItems=c.items().map(function(e){return n.mapping.toJS(e)})),s&&setTimeout(function(){t(".hidden-tag").tag()},10),setTimeout(function(){r.update()},100)},c.setItems(e,!0,!1),c.refreshItems=function(e){var r=c.items().map(function(e){return n.mapping.toJS(e)}),i=t(".link-tag.isActive");i.hasClass("all")||(r=r.filter(function(e){return e.tag==i.text()}));var s=u(r,!1,e),a=_slicedToArray(s,2),o=a[0];a[1];c.items(o),setTimeout(function(){t(".hidden-tag").tag()},10)},c.filterItems=function(e,n,i){var s=t(i.target);if(t(".link-tag.isActive").removeClass("isActive"),s.addClass("isActive"),s.hasClass("all"))c.setItems(c.allItems,!0,!0);else{var a=c.allItems.filter(function(t){return t.tag==e});c.setItems(a,!1,!0)}r.update(),t(document).click()},c.afterRender=function(){r.update()}}}),define("ReckoningOrders",["common"],function(e){function t(){var e=Date.now(),t=(new Date).getDay(),n=e-24*(t+7)*60*60*1e3;return new Date(new Date(n).setHours(0,0,0,0))}var n=e.$,r=e.ko;r.mapping=e.mapping;var i=function(e){var t=this;t.name=r.observable(e&&e.name?e.name:""),t.quantity=r.observable(e&&e.quantity?e.quantity:"1"),t.buyPrice=r.observable(e&&!isNaN(e.buyPrice)?e.buyPrice:""),t.sellPrice=r.observable(e&&!isNaN(e.sellPrice)?e.sellPrice:""),t.profit=e&&e.profit?e.profit:"",t.note=e&&e.note?e.note:"",t.isDone=!(!e||!e.isDone)&&e.isDone,t.tag=e&&e.tag?e.tag:"",t.historicTrades=r.observableArray([]),t.isHistoricTradesOpen=!1,t.isChanged=!1,t.name.subscribe(function(e){t.isChanged=!0}),t.quantity.subscribe(function(e){t.isChanged=!0}),t.buyPrice.subscribe(function(e){t.isChanged=!0}),t.sellPrice.subscribe(function(e){t.isChanged=!0})},s=function(e,t){var s=this;s._id=r.observable(e?e._id:""),s.client=r.observable(e?e.client:""),s.postage=r.observable(e&&e.postage?e.postage:0);var a=[];if(e&&n.isArray(e.items)&&e.items.length>0)e.items.forEach(function(e){a.push(new i(e))});else for(var o=0;o<3;o++)a.push(new i);s.isChanged=!1,s.items=r.observableArray(a),s.items.subscribe(function(e){s.isChanged=!0}),s.client.subscribe(function(e){s.isChanged=!0}),s.postage.subscribe(function(e){s.isChanged=!0}),s.createDate=r.observable(e?e.createDate:""),s.displayDate=r.observable(e?e.displayDate:""),s.rate=e?e.rate:"",s.buyPrice=r.observable(e&&e.buyPrice?e.buyPrice:""),s.sellPrice=r.observable(e&&e.sellPrice?e.sellPrice:""),s.profit=r.observable(e&&e.profit?e.profit:""),s.isComplete=r.observable(!(!e||!e.isComplete)&&e.isComplete),s.formatPrice=function(e){if(!e)return"?";var t=e();return t?(+t).toFixed(1):"?"},s.total=r.pureComputed(function(){var e=parseFloat(this.sellPrice()),t=parseFloat(this.postage());return isNaN(e)||isNaN(t)?"?":(e+t).toFixed(1)},s);s.status=r.observable(e?e.status:"1RECEIVED"),s.packingStatus=e?e.packingStatus:"1ISREADY",s.orderStatus=r.pureComputed(function(){return"3DONE"==s.status()?"font-green":"2SENT"==s.status()?"font-yellow":void 0}),s.getHistoricTrades=function(e,i,s){var a=r.mapping.toJS(e),o=n(s.target).closest(".item").find(".historicbox");if(e.isHistoricTradesOpen)o.slideUp("fast",function(){e.isHistoricTradesOpen=!1,t.update()});else{var u=arguments[4];if(""==a.name)return;arguments[3](),n.getJSON("./historictrades",{itemName:a.name},function(t,n){"success"==n?e.historicTrades(t):e.historicTrades([]),o.slideDown("fast",function(){e.isHistoricTradesOpen=!0,u()})})}},s.hasHistoricTrades=function(e){return e.historicTrades().length>0},s.addItem=function(){s.items.unshift(new i),t.update()},s.removeItem=function(e){s.items.remove(e),t.update()},s.addAddress=function(e){s.addresses.unshift({_id:"",client:s.client(),recipient:"",address:"",phone:""}),t.update()},s.getAddresses=function(e){arguments[3]();var t=arguments[4],r=e.client();""!=r&&n.getJSON("./addressesByClient",{client:r},function(n,r){"success"==r?e.addresses(n):e.addresses([]),t()})};var u=[];s.removeAddress=function(e){""!=e._id&&u.push(e._id),s.addresses.remove(e),t.update()},s.submitAddresses=function(e){arguments[3]();var t=arguments[4],i=r.mapping.toJS(e.addresses);return n.post("./addresses",{client:e.client,addresses:i},function(n,r){e.addresses(n),t()},"json"),!1},s.submitOrder=function(e){arguments[3]();var t=(arguments[4],n.parseJSON(r.toJSON(e)));return n.post("./order",t,function(t,n){t.items.forEach(function(e){e.historicTrades=[]}),console.log("get post result"),r.mapping.fromJS(t,{},e)},"json"),!1}};return function(e,a){function o(e){var t=l.filter(function(t){return t.client().indexOf(e)>=0});c.orders(t),setTimeout(function(){a.update()},100)}function u(e){g=e;var t=setTimeout(function(){for(var e=1;e<m.length;e++)clearTimeout(m[e]);m=[],""!=g&&n.ajax("./ordersByName",{data:{client:g},type:"GET",success:function(e,t){c.orders(c.getObservableOrders(e)),setTimeout(function(){a.update()},100)},dataType:"json"}),console.log("i am searching "+g)},1e3);m.push(t)}var c=this,d=t();c.updateReservedOrders=function(e){l=e},c.sortOrders=function(e){e.sort(function(e,t){var n=e.status(),r=t.status();return n==r?e.createDate()<=t.createDate()?1:-1:n<r?-1:1})},c.getObservableOrders=function(e){var t=[];return e.forEach(function(e){t.push(new s(e,a))}),t};var f=c.getObservableOrders(e);c.orders=r.observableArray(f),c.toggleClientView=function(e,t,r){n(r.target).toggleClass("icon-eyeslash");var i=n(".orders--reckoning");n(r.target).hasClass("icon-eyeslash")?i.addClass("isClientView"):i.removeClass("isClientView"),a.update()},c.markDone=function(e){arguments[3]();var t=arguments[4],r=(arguments[1],e._id()),i=e.status(),s="1RECEIVED";"1RECEIVED"==i?s="2SENT":"2SENT"==i&&(s="3DONE"),n.ajax("./orderStatus/"+r,{success:function(r,i){e.status(s);var a=c.orders();""==n("#search-reckoningOrders").val()?("3DONE"==s&&e.createDate()<d&&c.removeDoneOrder(e),c.sortOrders(a),c.orders(a),c.updateReservedOrders(a)):p=!0,t()},data:{status:s},dataType:"json",type:"PUT"})},c.submitOrders=function(){arguments[3]();var e=arguments[4],t=c.orders(),s=n.parseJSON(r.toJSON(t));if(Array.isArray(s)&&s.length>0){var a=[],o=s.filter(function(e,t){var n=!1;if(e.isChanged)n=!0;else for(var r=0;r<e.items.length;r++)if(e.items[r].isChanged){n=!0;break}return n&&a.push(t),n});o.length>0?n.post("./orders",{orders:o},function(s,o){s.forEach(function(e,s){var o=a[s];n.isArray(e.items)&&0==e.items.length&&(e.items=[{},{},{}]),e.items.forEach(function(e){e.historicTrades=[]}),r.mapping.fromJS(e,{items:{create:function(e){return new i(e.data)}}},t[o]),t[o].isChanged=!1}),e()},"json"):e()}return""!=n("#search-reckoningOrders").val()&&(p=!0),!1},c.afterRender=function(){a.update()},c.addOrder=function(){var e=new s(null,a);c.orders.unshift(e),c.updateReservedOrders(c.orders()),a.update(),n(window).scrollTop(0)},c.addExistingOrder=function(e){c.orders.push(doneOrder)},c.removeDoneOrder=function(e){c.orders.remove(e)},c.removeOrder=function(e){arguments[3]();var t=arguments[4],r=e._id();if(c.orders.remove(e),""==r)return void t();n.ajax("./order/"+r,{success:function(e,n){t()},dataType:"json",type:"DELETE"}),c.updateReservedOrders(c.orders()),a.update()};var l=null,p=!1;c.searchOrders=function(e,t){var r=n(t.target).val(),i=r.match(/(\s*)([\u4E00-\u9FA5\uF900-\uFA2D\w]+[\u4E00-\u9FA5\uF900-\uFA2D\w ]*)/);null==l&&(l=c.orders()),null!=i?""==i[1]?o(i[2]):u(i[2]):p?n.getJSON("./reckoningOrdersJson",function(e,t){var n=c.getObservableOrders(e);l=n,p=!1,c.orders(n),setTimeout(function(){a.update()},100)}):null!=l&&(g="",c.sortOrders(l),c.orders(l),setTimeout(function(){a.update()},100))};var m=[],g=""}}),define("IncomeList",["common"],function(e){var t=e.$,n=e.ko;return n.mapping=e.mapping,function(e,r){var r=r,i=this;i.incomeList=n.observableArray(e),i.setIncomeList=function(e){i.incomeList(e)},i.formatPrice=function(e){return e?(+e).toFixed(1):"?"},i.toggleTotalView=function(e,n,r){t(r.target).toggleClass("icon-eyeopen");var i=t(r.target).closest(".orderitem-cnt");t(r.target).hasClass("icon-eyeopen")?i.addClass("isShow"):i.removeClass("isShow")},i.afterRender=function(){r.update()}}}),define("../js/main",["common","ReceivedOrders","ItemsModel","ReckoningOrders","IncomeList"],function(e,t){function n(){function n(e){switch(e){case 0:u[1]=!0,u[2]=!0;break;case 1:u[0]=!0,u[2]=!0;break;case 2:u[0]=!0,u[1]=!0,u[3]=!0}}function r(){0==c.activeIndex&&s.getJSON("./receivedOrdersJson",function(e,t){p.setOrders(e,!0)}),2==c.activeIndex&&s.getJSON("./reckoningOrdersJson",function(e,t){var n=f.getObservableOrders(e);f.orders(n)})}function i(){var e=c.activeIndex;1!=e&&2!=e||s.getJSON("./receivedOrdersJson",function(e,t){p.setOrders(e,!0)}),0!=e&&2!=e||s.getJSON("./purchaseItemsJson",function(e,t){d.setItems(e.items,!0,!0)}),0!=e&&1!=e||s.getJSON("./reckoningOrdersJson",function(e,t){var n=f.getObservableOrders(e);f.orders(n)}),2==e&&s.getJSON("./incomeListJson",function(e,t){l.setIncomeList(e)})}var s=e.$,a=e.ko,o=(e.mapping,e.Swiper),u=[!1,!1,!1,!1],c=new o(".swiper-container",{autoHeight:!0,spaceBetween:30,pagination:".swiper-pagination",paginationClickable:!0,simulateTouch:!1,shortSwipes:!1,longSwipes:!1,paginationBulletRender:function(e,t){var n="";switch(e){case 0:n="接单";break;case 1:n="采购";break;case 2:n="算账";break;case 3:n="收益"}return'<span class="'+t+'">'+n+"</span>"}});e.initTapEvent({updateAllData:i,updateCurrentData:r,setViewModelStatus:n,swiper:c});var d,f,l,p=new t(orders);p.setSwiper(c),a.applyBindings(p,s("#receivedOrders")[0]),require(["common","ItemsModel","ReckoningOrders","IncomeList"],function(e,t,r,i){var s=e.$,a=e.ko,o=new Promise(function(e,r){s.getJSON("./purchaseItemsJson",function(r,i){d=new t(r.items,c),e(d),a.applyBindings(d,s("#purchaseItems")[0]);var o=new Promise(function(e,t){s.getJSON("./user/"+USER_ID,function(t,n){e(t)})});o.catch(function(e){}),o.then(function(e){var t=Array.isArray(e.tags)?e.tags:[];s(".hidden-tag").tag({tags:t,updateTag:function(e,t,r){if(t!=r){if(Array.isArray(d.allItems)&&d.allItems.length>0){var i=d.allItems.find(function(t){return t._id==e});if(i.tag=r,i){var a=[];d.allItems.forEach(function(e){a.indexOf(e.tag)<0&&e.tag&&a.push(e.tag)}),d.tags(a)}}s.post("./itemtag",{itemName:e,oldTag:t,newTag:r},function(e,t){n(c.activeIndex)},"json")}}})})})}),m=new Promise(function(e,t){s.getJSON("./reckoningOrdersJson",function(t,n){f=new r(t,c),e(f),a.applyBindings(f,s("#reckoningOrders")[0])})});Promise.all([o,m]).then(function(e){}),s.getJSON("./incomeListJson",function(e,t){l=new i(e,c),a.applyBindings(l,s("#incomeList")[0])}),s(document).on("keydown",function(e){if(13==e.keyCode&&(0==c.activeIndex||2==c.activeIndex)){s(document.activeElement).blur();var t=0==c.activeIndex?"receivedOrders":"reckoningOrders",n=s("#"+t+" .action-enter");return setTimeout(function(){n.trigger("click")},100),!1}}),c.params.onSlideChangeStart=function(e){var t=e.activeIndex;switch(e.activeIndex){case 0:u[t]&&s.getJSON("./receivedOrdersJson",function(e,n){p.setOrders(e,!0),u[t]=!1});break;case 1:u[t]&&s.getJSON("./purchaseItemsJson",function(e,n){d.setItems(e.items,!0,!0),u[t]=!1});break;case 2:u[t]&&s.getJSON("./reckoningOrdersJson",function(e,n){var r=f.getObservableOrders(e);f.orders(r),u[t]=!1});break;case 3:u[t]&&s.getJSON("./incomeListJson",function(e,n){l.setIncomeList(e),u[t]=!1})}setTimeout(function(){s(window).scrollTop(0)},100)}}),require(["angularApp"],function(e){e().bootstrap(s("#settings")[0],["settings"]),s(".icon-cog").colorbox({inline:!0,width:335,height:200,scrolling:!1,close:"",top:0,onComplete:function(){setInterval(function(){s.colorbox.resize()},200)}}),s(window).scroll(function(){var e=s(window).scrollTop();s(".searchbox").css("top",e)})}),s(".icon-signout").bind("click",function(){return s(".mask").addClass("isLoginShow"),s.get("./logout",function(e,t){e.success&&s.get("./content",function(e,t){setTimeout(function(){s("#container").html(e),s(".mask").removeClass("isLoginShow")},1e3)},"html")},"json"),!1})}return n});