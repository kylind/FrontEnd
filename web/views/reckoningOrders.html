<div class="searchbox">
    <button type="button" text="Add" class="rmargin-20 fl icon icon-save-all action-submit action-enter" data-bind="tap:$root.submitOrders"> Orders </button>
    <a href="#" class="fl icon icon-eye" data-bind="tap: $root.toggleClientView"></a>
    <div class="lmargin-150">
        <input type="text" class="w-p100 input-search" name="search-reckoningOrders" data-bind="event: {input: $root.searchOrders}" placeholder="Search Your Orders" />
    </div>
</div>
<div class="tmargin-40 orders  orders--reckoning" data-bind="foreach: orders">
    <section class="order order--reckoning enterArea">
        <div class="order-client">
            <input type="hidden" data-bind="value: _id" />
            <input type="hidden" data-bind="value: rate" />
            <div class="order-clientbox">
                <input type="text" class="client" data-bind="value: client" placeholder="Client" />

            </div>
            <div  class="taCenter">
             <span data-bind="text: displayDate"></span>
         </div>
        </div>
        <div class="order-items">
            <div class="order-actionbox">
                <a href="#" class="icon icon-add" data-bind="tap:addItem"> </a>
                <a href="#" class="icon icon-flag rmargin-20 action-submit" data-bind="tap: markDone, css: orderStatus"> </a>
                <a href="#" class="icon icon-remove-sign  action-submit action-delete" data-bind="tap: $parent.removeOrder"></a>
            </div>
             <!-- ko if: _id() != '' -->
            <div class="order-totalbox">

                <span class="font-bold font-red vaMiddle onlyForMe" data-bind="css:{'font-red': isComplete}">
                                <span>B: </span><span class="rmargin-5" data-bind="text: formatPrice(buyPrice)"></span>
                <span>S: </span><span class="rmargin-5" data-bind="text: formatPrice(sellPrice)"></span>
                <span>P: </span><span class="rmargin-5" data-bind="text: formatPrice(profit)"></span>
                <span>F: </span>
                <span><input type="text" class="w-30 font-bold postage" data-bind="value: postage,css:{'font-red': isComplete}" /></span>
                </span>
                <span class="font-bold font-red vaMiddle onlyForClient" data-bind="css:{'font-red': isComplete}">
                                <span>Total: </span><span data-bind="text: sellPrice"></span> + <span data-bind="text: postage"></span> = <span data-bind="text: total"></span>
                </span>

            </div>
             <!-- /ko -->
            <div class="items">
                <!-- ko foreach: items -->
                <fieldset class="item">
                    <div class="item-fields">
                        <span class="w-p20">
                            <input  type="text" data-bind="value: name" placeholder="Product" />
                        </span>
                        <span class="w-p10">
                            <input type="number" min="0" max="100" step="1" data-bind="value: quantity" placeholder="Quantity" />
                        </span>
                        <span class="w-p15 onlyForMe">
                            <input  type="text" data-bind="value: buyPrice" placeholder="Buy" />
                        </span>
                        <span class="w-p15">
                            <input  type="text" data-bind="value: sellPrice" placeholder="Sell" />
                        </span>
                        <span class="w-p15 onlyForMe">
                            <input  type="text" readonly data-bind="value: profit" placeholder="Profit" />
                        </span>
                        <span class="w-p25  taRight rpadding-5">
                            <a href="#" class="icon icon-search  action-load" data-bind="tap: $parent.getHistoricTrades"></a>
                            <a href="#" class="icon icon-remove action-submit" data-bind="tap: $parent.removeItem"></a>
                        </span>
                    </div>
                    <div class="historicbox" >
                        <!-- ko if: historicTrades().length>0 -->


                        <div class="historic">
                            <div class="historic-header">
                                <span class="w-p20 taLeft">Client</span>
                                <span class="w-p10 taLeft">Q</span>
                                <span class="w-p15 taLeft">Buy</span>
                                <span class="w-p15 taLeft">Sell</span>
                                <span class="w-p40 taLeft lpadding-5">Date</span>
                            </div>
                            <div class="historic-items" data-bind="template:{ name: 'historicTrades' , foreach: historicTrades }">

                            </div>
                        </div>
                        <!-- /ko -->


                        <!-- ko if: historicTrades().length==0 -->
                        <p class="taCenter">we cannot get historic trades!</p>
                        <!-- /ko -->


                    </div>
                </fieldset>
                <!-- /ko -->
            </div>
        </div>
    </section>
</div>

<div class="prompt">
    <span class="prompt-submitting"><i class="fa fa-spinner fa-pulse"></i> <span>Submit...</span></span>
    <span class="prompt-succeed disappeared icon icon-peace"> Succeed!</span>
</div>

<div class="confirm">
    <button type="button" class="confirm-submit taCenter ">Confirm</button>
    <button type="button" class="confirm-cancel taCenter lmargin-5">Cancel</button>
</div>

<script type="text/html" id="historicTrades">
   <section class="historic-item">
            <input type="hidden" data-bind="text: name"></input>
            <span class="w-p20 taLeft" data-bind="text: client"></span>
            <span class="w-p10 taLeft" data-bind="text: quantity"></span>
            <span class="w-p15 taLeft" data-bind="text: buyPrice"></span>
            <span class="w-p15 taLeft" data-bind="text: sellPrice"></span>
            <span class="w-p40 taLeft" data-bind="text: createDate"></span>

    </section>


</script>
<script>
var orders = <%- JSON.stringify(orders) %>; //
</script>
<script data-main="/js/main-reckoning" src="/js/require.js"></script>
