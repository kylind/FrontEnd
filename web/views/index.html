<div class="swiper-container">
    <div class='cogbox'>
        <a href="#settings" class="icon icon-cog"></a>
        <a href="./logout" class="icon icon-signout"></a>
    </div>
    <div class="swiper-pagination">
    </div>
    <div class="swiper-wrapper">
        <section class="swiper-slide" id="receivedOrders">
            <div class="searchbox">
                <button type="button" text="Add" class="fl icon icon-add" data-bind="tap:$root.addOrder"> Order </button>
                <button type="button" text="Add" class="lmargin-5 fl icon icon-save-all action-submit action-enter" data-bind="tap:$root.submitOrders"> Orders </button>
                <div class="lmargin-220">
                    <input type="text" class="w-p100 input-search" id="search-receivedOrders" data-bind="event: {input: $root.searchOrders}" placeholder="Search Your Orders" />
                </div>
            </div>
            <div class="tmargin-40" data-bind="foreach: orders">
                <section class="order order--received enterArea">
                    <div class="order-client">
                        <input type="hidden" data-bind="value: _id" />
                        <div class="order-clientbox">
                            <input type="text" class="client oneline" data-bind="value: client" placeholder="Client" />
                        </div>
                    </div>
                    <div class="order-items">
                        <div class="order-actionbox">
                            <a href="#" class="icon icon-add" data-bind="tap:$root.addItem"> </a>
                            <a href="#" class="icon icon-leaf action-submit action-mark" data-bind="tap: $root.markPackingStatus, css: orderPackingStatus"> </a>
                            <a href="#" class="icon action-submit action-mark" data-bind="tap: $root.markPackingStatus, css: orderReadyStatus"> </a>
                            <a href="#" class="icon icon-remove-sign action-submit action-delete" data-bind="tap: $root.removeOrder"></a>
                        </div>
                        <!-- ko foreach: items -->
                        <fieldset class="item">
                            <span class="w-p40">
                    <input  type="text" class="oneline" data-bind="value: name" placeholder="Product" />
                </span>
                            <span class="w-p10">
                    <input type="number" min="0" max="100" step="1" data-bind="value: quantity" placeholder="Quantity" />
                </span>
                            <span class="w-p30">
                    <input  type="text" data-bind="value: note" placeholder="Mark:" />
                </span>
                            <span class="w-p20 taRight rpadding-5"><!-- data-bind="css: { 'align-right': $index()%2==0 } -->

                     <a href="#" class="icon icon-remove  action-submit" data-bind="tap: $root.removeItem"></a>

                </span>
                        </fieldset>
                        <!-- /ko -->
                    </div>
                </section>
            </div>
        </section>
        <section class="swiper-slide" id="purchaseItems">
            <div class="box-viewselection">
                <input type="radio" name="itemview" value="name" data-bind="checked: itemview" /> By Name
                <input type="radio" name="itemview" value="mark" data-bind="checked: itemview" /> By Mark
            </div>
            <!-- ko if: itemview()=='name' -->
            <div class="orderitems">
                <div class="orderitems-header">
                    <span class="w-p40 taLeft">Name</span>
                    <span class="w-p10 taLeft">Q</span>
                    <span class="w-p50 taRight rpadding-5"> Done?</span>
                </div>
                <!-- ko foreach: items -->
                <div class="orderitem">
                    <div class="orderitem-cnt">
                        <span class="taLeft w-p40 oneline" data-bind="text: _id"></span>
                        <span class="taLeft w-p10" data-bind="text: quantity"></span>
                        <span class="taRight w-p40 orderitem-cnt-btns">
                            <a href="#" class="icon icon-search  rmargin-20 action-load" data-bind="tap: getSubItems"></a>
                            <a href="#" class="icon icon-flag rmargin-5 action-submit" data-bind="tap: markDone, css: markItemStatus()"></a>
                        </span>
                        <span class="taRight w-p10" data-bind="text: restCount">

                        </span>
                    </div>
                    <div class="orderitem-subItems">
                        <!-- ko if: subItems().length>0 -->
                        <div class="subItems">
                            <div class="subItems-header">
                            <span class="w-p30 taLeft">客户</span>
                            <span class="w-p10 taLeft">Q</span>
                            <span class="w-p20 taLeft">备注</span>
                            <span class="w-p30 taRight rpadding-5"></span>
                            <span class="w-p10 taRight rpadding-5"></span>
                        </div>
                        <div class="subItems-cnt" data-bind="template:{ name: 'subItem', foreach: subItems }">
                        </div>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: subItems().length==0 -->
                    <p class="taCenter">Somehow we cannot get item detail for now!</p>
                    <!-- /ko -->
                </div>
            </div>
            <!-- /ko -->
            </div>
            <!-- /ko -->

            <!-- ko if: itemview()=='mark' -->
            <div class="orderitems">
                <div class="orderitems-header">
                    <span class="w-p40 taLeft oneline">Mark</span>
                    <span class="w-p40 taLeft oneline">Name</span>
                    <span class="w-p20 taLeft">Q</span>
                </div>
                <!-- ko foreach: markedItems -->
                <div class="orderitem">
                    <div class="orderitem-cnt">
                        <span class="taLeft w-p40" data-bind="text: note"></span>
                        <span class="taLeft w-p40" data-bind="text: name"></span>
                        <span class="taLeft w-p20" data-bind="text: quantity"></span>
                    </div>
                </div>
                <!-- /ko -->
            </div>
            <!-- /ko -->
            <script type="text/html" id="subItem">
                <section class="subItems-item">
                    <input type="hidden" data-bind="value: _id" />
                    <span class="w-p30 oneline" data-bind="text: client"> </span>
                    <span class="w-p10" data-bind="text: quantity"> </span>
                    <span class="w-p20 taLeft" data-bind="text: note"> </span>
                    <span class="taRight w-p30">
                        <a href="#" class="icon icon-flag rmargin-5 action-submit" data-bind="tap: $parent.markSubItemDone, css: {'font-green': isDone}"></a>
                    </span>
                    <span class="w-p10 taRight rpadding-5"></span>
                    <!-- <span class="w-p25 taRight rpadding-5" data-bind="text: createDate"> </span> -->
                </section>
            </script>
        </section>
        <section class="swiper-slide" id="reckoningOrders">
            <div class="searchbox">
                <button type="button" text="Add" class="rmargin-20 fl icon icon-save-all action-submit action-enter" data-bind="tap:$root.submitOrders"> Orders </button>
                <a href="#" class="fl icon icon-eye" data-bind="tap: $root.toggleClientView"></a>
                <div class="lmargin-150">
                    <input type="text" class="w-p100 input-search" id="search-reckoningOrders" data-bind="event: {input: $root.searchOrders}" placeholder="Search Your Orders" />
                </div>
            </div>
            <div class="tmargin-40 orders  orders--reckoning" data-bind="foreach: orders">
                <section class="order order--reckoning enterArea">
                    <div class="order-client">
                        <input type="hidden" data-bind="value: _id" />
                        <input type="hidden" data-bind="value: rate" />
                        <div class="order-clientbox">
                            <input type="text" class="client oneline" data-bind="value: client" placeholder="Client" />
                        </div>
                        <div class="taCenter">
                            <span data-bind="text: displayDate"></span>
                        </div>
                    </div>
                    <div class="order-items">
                        <div class="order-actionbox">
                            <a href="#" class="icon icon-add" data-bind="tap:addItem"> </a>
                            <a href="#" class="icon icon-flag rmargin-20 action-submit action-mark" data-bind="tap:$parent.markDone, css: orderStatus"> </a>
                            <a href="#" class="icon icon-remove-sign  action-submit action-delete" data-bind="tap: $parent.removeOrder"></a>
                        </div>
                        <!-- ko if: _id() != '' -->
                        <div class="order-totalbox">
                            <span class="font-bold font-red vaTop onlyForMe" data-bind="css:{'font-red': isComplete}">
                                <span class="w-p20">总共：</span>
                            <span class="w-p10"><input type="text" class="w-30 font-bold postage" placeholder='Fee' data-bind="value: postage,css:{'font-red': isComplete}" /></span>
                            <span class="w-p15" data-bind="text: formatPrice(buyPrice)"></span>
                            <span class="w-p15" data-bind="text: formatPrice(sellPrice)"></span>
                            <span class="w-p15" data-bind="text: formatPrice(profit)"></span>
                            <span class="w-p25"></span>
                            </span>
                            <span class="font-bold font-red vaTop onlyForClient" data-bind="css:{'font-red': isComplete}">
                                <span class="lmargin-5">总共： &nbsp;</span>
                            <span data-bind="text: formatPrice(sellPrice)"></span>
                            <span>&nbsp;+ &nbsp;</span>
                            <span class="w-p15 postagebox"><input type="text" class="w-30 font-bold postage"  data-bind="value: postage,css:{'font-red': isComplete}" /></span>
                            <span>&nbsp;=&nbsp;</span>
                            <span data-bind="text: total"></span>
                            </span>
                        </div>
                        <!-- /ko -->
                        <div class="items">
                            <!-- ko foreach: items -->
                            <fieldset class="item">
                                <div class="item-fields">
                                    <span class="w-p20 name">
                                        <input  type="text" class="oneline" data-bind="value: name" placeholder="Product" />
                                    </span>
                                    <span class="w-p10 quantity">
                                        <input type="number" min="0" max="100" step="1" data-bind="value: quantity" placeholder="Quantity" />
                                    </span>
                                    <span class="w-p15 onlyForMe">
                                        <input  type="text" data-bind="value: buyPrice" placeholder="Buy" />
                                    </span>
                                    <span class="w-p15 sell">
                                        <input  type="text" data-bind="value: sellPrice" placeholder="Sell" />
                                    </span>
                                    <span class="w-p15 onlyForMe">
                                        <input  type="text" readonly data-bind="value: profit" placeholder="Profit" />
                                    </span>
                                    <span class="w-p25  taRight rpadding-5">
                                        <a href="#" class="icon icon-search  action-load" data-bind="tap: $parent.getHistoricTrades"></a>
                                        <a href="#" class="icon icon-remove action-submit" data-bind="tap: $parent.removeItem"></a>
                                    </span>
                                </div>
                                <div class="historicbox">
                                    <!-- ko if: historicTrades().length>0 -->
                                    <div class="historic">
                                        <div class="historic-header">
                                            <span class="w-p20 taLeft client">Client</span>
                                            <span class="w-p10 taLeft quantity">Q</span>
                                            <span class="w-p15 taLeft buy">Buy</span>
                                            <span class="w-p15 taLeft sell">Sell</span>
                                            <span class="w-p40 taLeft lpadding-5 date">Date</span>
                                        </div>
                                        <div class="historic-items" data-bind="template:{ name: 'historicTrades' , foreach: historicTrades }">
                                        </div>
                                    </div>
                                    <!-- /ko -->
                                    <!-- ko if: historicTrades().length==0 -->
                                    <p class="taCenter">we cannot get historic trades!</p>
                                    <!-- /ko -->
                                </div>
                            </fieldset>
                            <!-- /ko -->
                        </div>
                    </div>
                </section>
            </div>
            <script type="text/html" id="historicTrades">
                <section class="historic-item">
                    <input type="hidden" data-bind="text: name"></input>
                    <span class="w-p20 oneline taLeft vaTop name" data-bind="text: client"></span>
                    <span class="w-p10 taLeft quantity" data-bind="text: quantity"></span>
                    <span class="w-p15 taLeft buy" data-bind="text: buyPrice"></span>
                    <span class="w-p15 taLeft sell" data-bind="text: sellPrice"></span>
                    <span class="w-p40 taLeft date" data-bind="text: createDate"></span>
                </section>
            </script>
        </section>
        <section class="swiper-slide" id="incomeList">
            <div class="incomelist isMobile tmargin-10">
                <div class="incomelist-header">
                    <span class="w-p15 taLeft">Year</span>
                    <span class="w-p10 taLeft">Week</span>
                    <span class="w-p15 taLeft">Period</span>
                    <span class="w-p20 taRight rpadding-5">Cost</span>
                    <span class="w-p20 taRight  rpadding-5">Revenue</span>
                    <span class="w-p20 taRight rpadding-5"> Income</span>
                </div>
                <!-- ko foreach: incomeList -->
                <!-- ko if: ($index() + 1) != ($root.incomeList().length) -->
                <div class="orderitem">
                    <div class="orderitem-cnt">
                        <span class="taLeft w-p15" data-bind="text: year"></span>
                        <span class="taLeft w-p10" data-bind="text: week"></span>
                        <span class="taLeft w-p15">

                                <i data-bind="text: firstDate"></i> -
                                <i data-bind="text: lastDate"></i>

                         </span>
                        <span class="taRight w-p20 rpadding-5" data-bind="text: $root.formatPrice(cost)"></span>
                        <span class="taRight w-p20 rpadding-5" data-bind="text: $root.formatPrice(revenue)"></span>
                        <span class="taRight w-p20 rpadding-5" data-bind="text: $root.formatPrice(income)"></span>
                    </div>
                </div>
                <!-- /ko -->
                <!-- ko if: ($index() + 1) == $root.incomeList().length -->
                <div class="orderitem">
                    <div class="orderitem-cnt total">
                        <span class="taRight w-p40  rpadding-5"><label class="vaMiddle">Total?</label><a class="icon icon-eyeslash vaMiddle" data-bind="tap: $root.toggleTotalView"></a></span>
                        <span class="taRight w-p20 rpadding-5" data-bind="text: $root.formatPrice(cost)"></span>
                        <span class="taRight w-p20 rpadding-5" data-bind="text: $root.formatPrice(revenue)"></span>
                        <span class="taRight w-p20 rpadding-5" data-bind="text: $root.formatPrice(income)"></span>
                    </div>
                </div>
                <!-- /ko -->
                <!-- /ko -->
            </div>
        </section>
    </div>
</div>
<!--
<div class="taCenter">
    <div class="box-mynote taLeft tmargin-10">
        <p>我是薇爸, 我的生活就是：</p>
        <code><pre>
for (var i = 0; i < Infinity; i++) {
    //TODO:采购;
    背货;
    打单;
    分货;
    拍照;
    打包;
    发货;
    带娃;
}
</pre>
</code>
    </div>
</div>
    -->
<div class="prompt">
    <span class="prompt-submitting"><i class="fa fa-spinner fa-pulse"></i> <span>Submit...</span></span>
    <span class="prompt-succeed disappeared icon icon-peace"> Succeed!</span>
</div>
<div class="confirm">
    <button type="button" class="confirm-submit taCenter ">Confirm</button>
    <button type="button" class="confirm-cancel taCenter lmargin-5">Cancel</button>
</div>
<div class="dNone">
    <div id="settings">
        <settings></settings>
    </div>
</div>
<script>
var orders = <%- JSON.stringify(orders) %>
</script>
