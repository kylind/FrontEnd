<div class="incomelist">
    <div class="incomelist-header">
        <span class="w-p15 taLeft">Year</span>
        <span class="w-p15 taLeft">Week</span>
        <span class="w-p25 taRight rpadding-5">Cost</span>
        <span class="w-p25 taRight  rpadding-5">Revenue</span>
        <span class="w-p20 taRight rpadding-5"> Income</span>
    </div>
    <!-- ko foreach: incomeList -->
    <div class="orderitem">
        <div class="orderitem-cnt">
            <span class="taLeft w-p15" data-bind="text: year"></span>
            <span class="taLeft w-p15" data-bind="text: week"></span>
            <span class="taRight w-p25 rpadding-5" data-bind="text: $root.formatPrice(cost)"></span>
            <span class="taRight w-p25 rpadding-5" data-bind="text: $root.formatPrice(revenue)"></span>
            <span class="taRight w-p20 rpadding-5" data-bind="text: $root.formatPrice(income)"></span>
        </div>
    </div>
    <!-- /ko -->
</div>

<script>

var IncomeListModel = function(incomeList) {

    var self = this;

    self.incomeList = ko.observableArray(incomeList);

    self.setIncomeList=function(incomeList){
        self.incomeList(incomeList)
    }

    self.formatPrice = function(price) {

        if (price) {
            return (+price).toFixed(1);
        } else {
            return '?'
        }
    }

}

var incomeList = <%- JSON.stringify(incomeList) %>;

var incomeListModel = new IncomeListModel(incomeList);


//ko.mapping.fromJS(items, {}, itemsModel);

ko.applyBindings(incomeListModel);
</script>
