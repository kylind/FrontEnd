{"version":3,"sources":["public/js/received-orders.js"],"names":["define","$","ko","mapping","Item","item","self","name","observable","quantity","note","isChanged","subscribe","newValue","OrderModel","order","_id","client","rate","observableItems","isArray","items","length","forEach","push","i","observableArray","createDate","status","packingStatus","orderPackingStatus","pureComputed","orderReadyStatus","OrdersModel","orders","mySwiper","swiper","init","observableOrders","Array","setSwiper","setOrders","addItem","data","unshift","buyPrice","sellPrice","isDone","update","removeItem","parent","remove","submitOrder","arguments","succeed","console","log","orderData","toJS","post","fromJS","submitOrders","ordersData","parseJSON","toJSON","changedIndexs","changedOrders","filter","index","isReal","rs","newOrder","orderIndex","create","option","markPackingStatus","id","$target","target","newStatus","hasClass","ajax","success","dataType","type","addOrder","window","scrollTop","removeOrder","searchOrders","event","keywords","val","searchedOrders","indexOf","setTimeout"],"mappings":"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","file":"received-orders.js","sourcesContent":["define(['jquery', 'knockout', 'knockout.mapping'], function($, ko, mapping) {\n\n    //ko.mapping = mapping;\n\n\n    var Item = function(item) {\n        var self = this;\n\n\n        self.name = ko.observable(item && item.name ? item.name : '');\n        self.quantity = ko.observable(item && item.quantity ? item.quantity : '1');\n        self.note = ko.observable(item && item.note ? item.note : '');\n\n\n        self.isChanged = false;\n\n        self.name.subscribe(function(newValue) {\n            self.isChanged = true;\n        })\n        self.quantity.subscribe(function(newValue) {\n            self.isChanged = true;\n        })\n\n        self.note.subscribe(function(newValue) {\n            self.isChanged = true;\n        })\n\n\n\n\n    }\n\n\n    var OrderModel = function(order) {\n        var self = this;\n        self._id = ko.observable(order && order._id ? order._id : '');\n        self.client = ko.observable(order && order.client ? order.client : '');\n        self.rate = order && order.rate ? order.rate : null;\n\n\n\n        var observableItems = [];\n\n        if (order && $.isArray(order.items) && order.items.length > 0) {\n            order.items.forEach(function(item) {\n                observableItems.push(new Item(item));\n            });\n\n        } else {\n            for (var i = 0; i < 3; i++) {\n                observableItems.push(new Item());\n            }\n\n        }\n\n\n        self.items = ko.observableArray(observableItems);\n\n        self.isChanged = false;\n        self.client.subscribe(function(newValue) {\n            self.isChanged = true;\n        });\n        self.items.subscribe(function(newValue) {\n            self.isChanged = true;\n        })\n\n        self.createDate = order && order.createDate ? order.createDate : '';\n        self.status = order && order.status ? order.status : '1RECEIVED';\n        self.packingStatus = ko.observable(order && order.packingStatus ? order.packingStatus : '1ISREADY');\n\n        self.orderPackingStatus = ko.pureComputed(function() {\n            if (self.packingStatus() == '3PACKED') {\n                return 'font-green';\n            } else if (self.packingStatus() == '2NOTREADY') {\n                return 'font-yellow';\n            } else {\n                return 'font-black';\n            }\n        });\n\n        self.orderReadyStatus = ko.pureComputed(function() {\n            if (self.packingStatus() == '2NOTREADY') {\n                return 'icon-thumbsdown font-yellow';\n            } else {\n                return 'icon-thumbsup font-black';\n            }\n        });\n\n\n    };\n\n    var OrdersModel = function(orders, mySwiper) {\n\n        var swiper = mySwiper;\n\n\n\n        function init(orders) {\n\n            var observableOrders = [];\n\n            if (Array.isArray(orders) && orders.length > 0) {\n                orders.forEach(function(order) {\n\n                    observableOrders.push(new OrderModel(order));\n\n                })\n            } else {\n\n                for (var i = 0; i < 30; i++) {\n                    observableOrders.push(new OrderModel());\n\n                }\n\n            }\n\n\n\n            return observableOrders;\n        }\n\n        var self = this;\n\n        self.setSwiper = function(mySwiper) {\n\n            swiper = mySwiper;\n\n        }\n\n        var observableOrders = init(orders);\n\n        self.orders = ko.observableArray(observableOrders);\n\n        self.setOrders = function(orders) {\n\n            self.orders(init(orders));\n\n        }\n\n        self.addItem = function(data) {\n\n            data.items.unshift({\n                name: \"\",\n                quantity: 1,\n                note: '',\n                buyPrice: '',\n                sellPrice: '',\n                isDone: false\n            });\n            swiper.update();\n        };\n\n        self.removeItem = function(data, parent) {\n            parent.items.remove(data);\n            swiper.update();\n        };\n\n        self.submitOrder = function(order) {\n            arguments[3]();\n            var succeed = arguments[4];\n\n            console.log('post request....');\n\n            var orderData = ko.mapping.toJS(order); //$.parseJSON(ko.toJSON(order));\n\n            $.post('/order', orderData, function(data, status) {\n\n                    console.log('get post result');\n                    ko.mapping.fromJS(data, {}, order);\n                    succeed();\n                },\n                'json'\n            );\n\n            return false;\n\n        };\n\n        self.submitOrders = function() {\n            arguments[3]();\n            var succeed = arguments[4];\n\n\n\n            var orders = self.orders();\n            //var ordersData = ko.mapping.toJS(orders); //$.parseJSON(ko.toJSON(order));\n            var ordersData = $.parseJSON(ko.toJSON(orders))\n\n            if (Array.isArray(ordersData) && ordersData.length > 0) {\n\n                var changedIndexs = [];\n\n                var changedOrders = ordersData.filter(function(order, index) {\n\n                    var isChanged = false;\n                    var isReal = order.client == '' ? false : true;\n\n                    if (isReal) {\n                        if (order.isChanged) {\n                            isChanged = true;\n                        } else {\n                            for (var i = 0; i < order.items.length; i++) {\n                                if (order.items[i].isChanged) {\n                                    isChanged = true;\n                                    break;\n                                }\n                            }\n                        }\n                    }\n\n                    if (isChanged) {\n                        changedIndexs.push(index);\n                    }\n\n                    return isChanged;\n\n                });\n\n                if (changedOrders.length > 0) {\n\n                    $.post('/orders', { orders: changedOrders }, function(rs, status) {\n\n\n                            rs.forEach(function(newOrder, index) {\n                                var orderIndex = changedIndexs[index];\n\n                                if ($.isArray(newOrder.items) && newOrder.items.length == 0) {\n                                    newOrder.items = [{}, {}, {}];\n                                }\n\n                                ko.mapping.fromJS(newOrder, {\n                                    items: {\n                                        create: function(option) {\n                                            return new Item(option.data);\n\n                                        }\n                                    }\n                                }, orders[orderIndex]);\n\n                                orders[orderIndex].isChanged = false;\n\n\n\n\n                            })\n\n                            succeed();\n                        },\n                        'json'\n                    );\n                } else {\n                    succeed();\n                }\n            }\n\n\n\n\n\n            return false;\n\n        };\n\n\n\n        self.markPackingStatus = function(order) {\n            arguments[3]();\n            var succeed = arguments[4];\n            var parent = arguments[1];\n            var id = order._id();\n\n            var packingStatus = order.packingStatus()\n\n            $target = $(arguments[2].target);\n\n            var newStatus = '';\n\n            if ($target.hasClass('icon-leaf')) {\n                if (packingStatus == \"1ISREADY\") {\n                    newStatus = '3PACKED';\n                } else if (packingStatus == \"3PACKED\") {\n                    newStatus = '1ISREADY';\n                }\n            } else {\n                if (packingStatus == \"1ISREADY\" || packingStatus == \"3PACKED\") {\n                    newStatus = '2NOTREADY';\n                } else {\n                    newStatus = '1ISREADY';\n                }\n            }\n\n\n            if (newStatus == \"\") {\n                succeed();\n                return;\n            }\n\n            $.ajax('./packingStatus/' + id, {\n                success: function(data, status) {\n\n                    order.packingStatus(newStatus)\n                    succeed();\n\n                },\n                data: {\n                    'packingStatus': newStatus\n                },\n                dataType: 'json',\n                type: 'PUT'\n\n            });\n\n        };\n\n        self.addOrder = function() {\n\n            var order = new OrderModel();\n\n            self.orders.unshift(order);\n            swiper.update();\n            $(window).scrollTop(0);\n        };\n\n        self.removeOrder = function(order) {\n\n            arguments[3]();\n            var succeed = arguments[4];\n\n            var id = order._id();\n            self.orders.remove(order);\n\n\n            if (id == '') {\n                swiper.update();\n                succeed();\n\n                return;\n            }\n\n            $.ajax('./order/' + id, {\n                success: function(data, status) {\n\n                    succeed();\n\n                },\n                dataType: 'json',\n                type: 'DELETE'\n\n            });\n            swiper.update();\n\n\n        };\n\n        var orders = null;\n        self.searchOrders = function(data, event) {\n\n            var keywords = $(event.target).val();\n            if (orders == null) {\n                orders = self.orders();\n            }\n\n            var searchedOrders = orders.filter(function(order) {\n\n                return order.client().indexOf(keywords) >= 0;\n            });\n\n\n            self.orders(searchedOrders);\n\n\n            setTimeout(function() {\n                swiper.update();\n            }, 100)\n\n\n        };\n\n    };\n\n\n\n    return OrdersModel;\n\n\n\n})\n"]}