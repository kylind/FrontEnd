{"version":3,"sources":["public/js/main.js"],"names":["requirejs","config","baseUrl","paths","jquery","shim","exports","deps","require","OrdersModel","ko","$","Swiper","isTouch","document","documentElement","_on","fn","on","arguments","apply","bindingHandlers","tap","init","element","valueAccessor","allBindings","viewModel","bindingContext","handler","event","$target","target","$submitting","$succeed","$confirm","hasClass","offset","one","fadeOut","$data","$parent","children","text","css","top","show","addClass","removeClass","delay","fadeIn","setTimeout","update","ordersModel","orders","applyBindings","swiper","autoHeight","spaceBetween","pagination","paginationClickable","simulateTouch","shortSwipes","longSwipes","paginationBulletRender","index","className","bulletName","setSwiper","window","scroll","scrollTop","ItemsModel","IncomeListModel","AddressesModel","itemsModel","reckoningOrdersModel","incomeListModel","addressesModel","getJSON","rs","status","items","markedItems","incomeList","keyCode","activeIndex","activeElement","blur","targetPage","trigger","params","onSlideChangeStart","setOrders","setItems","observableOrders","getObservableOrders","setIncomeList","addresses","setAddresses","angular","bootstrap","colorbox","inline","width","height","scrolling","close","onComplete","setInterval","iframe","doc","contentDocument","Math","max","body","clientHeight","scrollHeight","resize"],"mappings":"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","file":"main.js","sourcesContent":["requirejs.config({\n\n    baseUrl: './components',\n\n    paths: {\n        jquery: 'jquery/dist/jquery.min',\n        'knockout': 'knockout/dist/knockout',\n        'knockout.mapping': '/js/knockout.mapping.2.4.1.min',\n        'ReceivedOrders': '/js/received-orders',\n        'ReckoningOrders': '/js/reckoning-orders',\n        'IncomeList': '/js/income-list',\n        'Addresses': '/js/addresses',\n        'ItemsModel': '/js/purchase-items',\n        'swiper': 'swiper/dist/js/swiper.jquery.min',\n        'colorbox': 'jquery-colorbox/jquery.colorbox-min',\n        'angular': 'angular/angular.min',\n        'ngResource': 'angular-resource/angular-resource.min',\n        'ngAnimate': 'angular-animate/angular-animate.min',\n        //'settings.module': '/js/settings/settings.module',\n         //'settings.component': '/js/settings/settings.component'\n        'settings.component':'/js/settings/settings.min'\n    },\n    shim: {\n        'swiper': ['jquery'],\n        'knockout.mapping': ['knockout'],\n        'colorbox': ['jquery'],\n\n        'angular': { exports: 'angular' },\n        'ngResource': { deps: ['angular'], exports: 'angular' },\n        'ngAnimate': { deps: ['angular'], exports: 'angular' },\n    }\n\n});\n\n\nrequire(['ReceivedOrders', 'knockout', 'jquery', 'swiper'], function(OrdersModel, ko, $, Swiper) {\n\n    var isTouch = ('ontouchstart' in document.documentElement) ? 'touchstart' : 'click';\n    var _on = $.fn.on;\n    $.fn.on = function() {\n        arguments[0] = (arguments[0] === 'click') ? isTouch : arguments[0];\n        return _on.apply(this, arguments);\n    }\n\n    ko.bindingHandlers.tap = {\n\n        init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {\n\n            var handler = valueAccessor();\n\n            $(element).on('click', function(event) {\n\n                var $target = $(event.target);\n                var $submitting = $('.prompt-submitting');\n                var $succeed = $('.prompt-succeed');\n                var $confirm = $('.confirm');\n\n                if ($target.hasClass('action-delete') && $target.hasClass('action-submit')) {\n                    var offset = $target.offset();\n\n                    $('.confirm-submit').one('click', function() {\n\n                        $confirm.fadeOut('slow');\n                        handler(bindingContext.$data, bindingContext.$parent, event, function() {\n                            $submitting.children('span').text(\"Submitting...\");\n                            var offset = $target.offset();\n                            $('.prompt').css('top', offset.top).show();\n\n                        }, function() {\n\n                            $submitting.addClass('disappeared')\n                            $succeed.removeClass('disappeared')\n\n                            $('.prompt').delay(600).fadeOut('slow', function() {\n                                $submitting.removeClass('disappeared')\n                                $succeed.addClass('disappeared')\n                            });\n\n                        });\n\n                    })\n\n                    $('.confirm-cancel').one('click', function() {\n\n                        $confirm.fadeOut('slow');\n\n                    })\n\n                    $('.confirm').css('top', offset.top).fadeIn('slow');\n\n\n                } else if ($target.hasClass('action-submit')) {\n\n                    setTimeout(function() {\n\n                        handler(bindingContext.$data, bindingContext.$parent, event, function() {\n                            $submitting.children('span').text(\"Submitting...\");\n                            var offset = $target.offset();\n                            $('.prompt').css('top', offset.top).show();\n\n                        }, function() {\n\n                            $submitting.addClass('disappeared')\n                            $succeed.removeClass('disappeared')\n\n\n                            $('.prompt').delay(1200).fadeOut('slow', function() {\n                                $submitting.removeClass('disappeared')\n                                $succeed.addClass('disappeared')\n\n                            });\n\n\n\n                        });\n\n\n                    }, 100);\n\n\n\n                } else if ($target.hasClass('action-load')) {\n\n                    handler(bindingContext.$data, bindingContext.$parent, event, function() {\n                        $submitting.children('span').text(\"Loading...\");\n                        var offset = $target.offset();\n                        $('.prompt').css('top', offset.top).show();\n\n                    }, function() {\n\n                        $('.prompt').delay(600).fadeOut('slow');\n\n                    });\n\n                } else {\n                    handler(bindingContext.$data, bindingContext.$parent, event);\n\n\n                }\n                return false;\n            });\n\n\n        },\n        update: function(element, valueAccessor, allBindings, viewModel, bindingContext) {\n\n        }\n    }\n\n\n    var ordersModel = new OrdersModel(orders);\n    ko.applyBindings(ordersModel, $('#receivedOrders')[0]);\n\n    var swiper = new Swiper('.swiper-container', {\n        autoHeight: true,\n        spaceBetween: 30,\n        pagination: '.swiper-pagination',\n        paginationClickable: true,\n        simulateTouch: false,\n        shortSwipes: false,\n        longSwipes: false,\n        paginationBulletRender: function(index, className) {\n            var bulletName = '';\n            switch (index) {\n                case 0:\n\n                    bulletName = '接单';\n                    break;\n\n                case 1:\n                    bulletName = '采购';\n                    break;\n\n                case 2:\n                    bulletName = '算账';\n                    break;\n\n                case 3:\n                    bulletName = '收益';\n                    break;\n                    /* case 4:\n                         bulletName = 'Delivery';\n                         break;*/\n            }\n            return '<span class=\"' + className + '\">' + bulletName + '</span>';\n        }\n\n    });\n\n    ordersModel.setSwiper(swiper);\n\n    $(window).scroll(function() {\n        var top = $(window).scrollTop();\n        $(\".searchbox\").css(\"top\", top);\n\n    });\n\n\n    require(['ItemsModel', 'ReckoningOrders', 'IncomeList', 'Addresses', 'knockout', 'jquery'], function(ItemsModel, OrdersModel, IncomeListModel, AddressesModel, ko, $) {\n\n        var itemsModel, reckoningOrdersModel, incomeListModel, addressesModel;\n\n        $.getJSON('./purchaseItemsJson', function(rs, status) {\n\n            itemsModel = new ItemsModel(rs.items, rs.markedItems, swiper);\n            ko.applyBindings(itemsModel, $('#purchaseItems')[0]);\n\n        });\n\n\n        $.getJSON('./reckoningOrdersJson', function(orders, status) {\n            reckoningOrdersModel = new OrdersModel(orders, swiper);\n            ko.applyBindings(reckoningOrdersModel, $('#reckoningOrders')[0]);\n\n        });\n\n        $.getJSON('./incomeListJson', function(incomeList, status) {\n            incomeListModel = new IncomeListModel(incomeList, swiper);\n            ko.applyBindings(incomeListModel, $('#incomeList')[0]);\n\n        });\n\n        // $.getJSON('./addressesJson', function(addresses, status) {\n        //     addressesModel = new AddressesModel(addresses, swiper);\n        //     ko.applyBindings(addressesModel, $('#addresses')[0]);\n\n        // });\n\n        $(document).on('keydown', function(event) {\n            if (event.keyCode == 13 && (swiper.activeIndex == 0 || swiper.activeIndex == 2)) {\n                //var $target = $(document.activeElement).closest('.enterArea').find('.action-enter');\n                $(document.activeElement).blur();\n\n                var targetPage = swiper.activeIndex == 0 ? 'receivedOrders' : 'reckoningOrders'\n\n                var $target = $('#' + targetPage + ' .action-enter');\n                setTimeout(function() {\n                    $target.trigger('click')\n                }, 100);\n                return false;\n\n            }\n\n        });\n\n\n        swiper.params.onSlideChangeStart = function(swiper) {\n\n            switch (swiper.activeIndex) {\n                case 0:\n                    $.getJSON('./receivedOrdersJson', function(orders, status) {\n\n                        ordersModel.setOrders(orders);\n                        swiper.update();\n\n                    });\n                    break;\n                case 1:\n                    $.getJSON('./purchaseItemsJson', function(rs, status) {\n                        itemsModel.setItems(rs.items, rs.markedItems);\n                        swiper.update();\n\n                    });\n                    break;\n\n                case 2:\n                    $.getJSON('./reckoningOrdersJson', function(orders, status) {\n\n                        var observableOrders = reckoningOrdersModel.getObservableOrders(orders);\n                        reckoningOrdersModel.orders(observableOrders);\n                        swiper.update();\n\n                    })\n                    break;\n                case 3:\n                    $.getJSON('./incomeListJson', function(incomeList, status) {\n                        incomeListModel.setIncomeList(incomeList);\n                        swiper.update();\n\n                    })\n                    break;\n                case 4:\n                    $.getJSON('./addressesJson', function(addresses, status) {\n                        addressesModel.setAddresses(addresses);\n                        swiper.update();\n\n                    })\n                    break;\n            }\n            $(window).scrollTop(0);\n\n\n        }\n\n\n    });\n\n\n    require(['jquery', 'angular', 'settings.component','colorbox'], function($, angular) {\n\n        angular.bootstrap($('#settings')[0], ['settings']);\n\n        $('.icon-cog').colorbox({\n            inline: true,\n            width: 335,\n            height: 200,\n            scrolling: false,\n            close: '',\n            top: 0,\n            onComplete: function() {\n                setInterval(function() {\n\n                    var iframe = $('.cboxIframe')[0];\n\n                    if (iframe) {\n                        var doc = iframe.contentDocument || iframe.document;\n\n                        var height = Math.max(doc.body ? doc.body.clientHeight : 0, doc.documentElement.scrollHeight);\n\n                        height = height < 200 ? 200 : height;\n\n                        $.colorbox.resize({ height: height });\n                    }\n\n\n                }, 200)\n            }\n        });\n\n        $(window).scroll(function() {\n            var top = $(window).scrollTop();\n            $(\".cogbox\").css(\"top\", top + 10);\n\n        });\n\n    })\n\n\n});\n"]}