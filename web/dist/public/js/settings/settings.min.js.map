{"version":3,"sources":["public/js/settings/settings.module.js","public/js/settings/settings.component.js"],"names":["angular","module","USER_ID","constant","s","directive","link","scope","iElement","iAttrs","controller","floatRegex","passwordRegex","type","targetId","targetType","isLegal","$watch","value","oldValue","test","comparingValue","$scope","$element","$attrs","$transclude","targetValue","transclude","templateUrl","service","$resource","this","findUser","id","User","user","get","_id","$promise","component","userService","self","passwordConfirmation","saved","isLegalName","isLegalPassword","isConfirmed","myClasses","then","password","saveUser","$save","rs","setTimeout","$apply"],"mappings":"YAAAA,SAAQC,OAAO,YAAa,aAAa,aAEzC,IAAIC,SAAUA,SAAW,EAEzBF,SAAQC,OAAO,YAAYE,SAAS,UAAWD,QAE/C,IAAME,GAAE,CCNRJ,SAAQC,OAAO,YAAYI,UAAU,eAAgB,WAEjD,OAEIC,KAAM,SAASC,EAAOC,EAAUC,EAAQC,GACpC,GAAIC,GAAa,cACbC,EAAgB,iCAGhBC,GADSJ,EAAOK,SACTL,EAAOM,WAElBR,GAAMS,SAAU,EAEhBT,EAAMU,OAAO,cAAe,SAASC,EAAOC,GAExC,OAAQN,GAEJ,IAAK,QACDN,EAAMS,QAAmB,IAATE,GAAqBP,EAAWS,KAAKF,EACrD,MACJ,KAAK,WACDX,EAAMS,QAAmB,IAATE,GAAqBN,EAAcQ,KAAKF,EACxD,MACJ,KAAK,mBACDX,EAAMS,QAAmB,IAATE,GAAqBA,GAASX,EAAMc,mBASpEX,WAAY,SAASY,EAAQC,EAAUC,EAAQC,KAI/ClB,OACIQ,WAAY,IACZW,YAAa,IACbL,eAAgB,MAEpBM,YAAY,EACZC,YAAa,mDAIrB5B,QAAQC,OAAO,YAAY4B,QAAQ,cAAe,SAASC,GACvDC,KAAKC,SAAW,SAASC,GACrB,GAAIC,GAAOJ,EAAU,mCACjBK,EAAOD,EAAKE,KAAMC,IAAKJ,GAC3B,OAAOE,GAAKG,YAMpBtC,QAAQC,OAAO,YAAYsC,UAAU,YACjCX,YAAa,8CACblB,YAAa,SAAU,cAAe,UAAW,SAASY,EAAQkB,EAAaP,GAC3E,GAAIQ,GAAOV,IAGXU,GAAKC,qBAAuB,GAC5BD,EAAKE,OAAQ,EACbF,EAAKG,aAAc,EACnBH,EAAKI,iBAAkB,EACvBJ,EAAKK,aAAc,EACnBL,EAAKM,UAAY,GAEjBP,EAAYR,SAASC,GAAIe,KAAK,SAASb,GACnCM,EAAKN,KAAOA,EACZM,EAAKN,KAAKc,SAAW,KAIzBR,EAAKS,SAAW,WAgBZ,MAdAT,GAAKM,UAAY,WAEjBN,EAAKN,KAAKgB,QAAQH,KAAK,SAASI,GAE5BX,EAAKM,UAAY,YAEjBM,WAAW,WACP/B,EAAOgC,OAAO,WACVb,EAAKM,UAAY,MAGtB,QAGA","file":"settings.min.js","sourcesContent":["angular.module('settings', ['ngResource','ngAnimate']);\n\nvar USER_ID = USER_ID || '';\n\nangular.module('settings').constant('USER_ID', USER_ID );\n\nconst s=5;","angular.module('settings').directive('myValidation', function() {\n\n    return {\n\n        link: function(scope, iElement, iAttrs, controller) {\n            var floatRegex = /^\\d?\\.?\\d+$/;\n            var passwordRegex = /^(?!([a-zA-Z]+|\\d+)$)[\\S]{8,}$/;\n\n            var target = iAttrs.targetId;\n            var type = iAttrs.targetType;\n\n            scope.isLegal = true;\n\n            scope.$watch('targetValue', function(value, oldValue) {\n\n                switch (type) {\n\n                    case 'float':\n                        scope.isLegal = value == '' ? true : floatRegex.test(value);\n                        break;\n                    case 'password':\n                        scope.isLegal = value == '' ? true : passwordRegex.test(value);\n                        break;\n                    case 'password-confirm':\n                        scope.isLegal = value == '' ? true : value == scope.comparingValue;\n                        break;\n\n                }\n\n            });\n\n        },\n\n        controller: function($scope, $element, $attrs, $transclude) {\n\n\n        },\n        scope: {\n            targetType: '@',\n            targetValue: '@',\n            comparingValue: '@?'\n        },\n        transclude: true,\n        templateUrl: \"/components/settings/validation.template.html\"\n    }\n});\n\nangular.module('settings').service('userService', function($resource) {\n    this.findUser = function(id) {\n        var User = $resource('http://127.0.0.1:3000/user/:_id');\n        var user = User.get({ _id: id });\n        return user.$promise;\n    }\n\n});\n\n\nangular.module('settings').component('settings', {\n    templateUrl: '/components/settings/settings.template.html',\n    controller: ['$scope', 'userService', 'USER_ID', function($scope, userService, id) {\n        var self = this;\n\n\n        self.passwordConfirmation = '';\n        self.saved = false;\n        self.isLegalName = true;\n        self.isLegalPassword = true;\n        self.isConfirmed = true;\n        self.myClasses = '';\n\n        userService.findUser(id).then(function(user) {\n            self.user = user;\n            self.user.password = '';\n        });\n\n\n        self.saveUser = function() {\n\n            self.myClasses = 'isActive';\n\n            self.user.$save().then(function(rs) {\n\n                self.myClasses = 'isSuccess';\n\n                setTimeout(function() {\n                    $scope.$apply(function() {\n                        self.myClasses = '';\n                    });\n\n                }, 900)\n\n            });\n            return false;\n\n\n        }\n\n    }]\n});\n\n\n// <span>Hello, {{ $ctrl.name }}</span>\n"]}