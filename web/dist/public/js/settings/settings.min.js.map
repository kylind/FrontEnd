{"version":3,"sources":["public/js/settings/settings.module.js","public/js/settings/settings.component.js"],"names":["angular","module","USER_ID","constant","directive","link","scope","iElement","iAttrs","controller","floatRegex","passwordRegex","type","targetId","targetType","isLegal","$watch","value","oldValue","test","comparingValue","$scope","$element","$attrs","$transclude","targetValue","transclude","templateUrl","service","$resource","this","findUser","id","User","user","get","_id","$promise","component","userService","self","passwordConfirmation","saved","isLegalName","isLegalPassword","isConfirmed","myClasses","then","password","saveUser","$save","rs","setTimeout","$apply"],"mappings":"YAAAA,SAAQC,OAAO,YAAa,aAAa,aAEzC,IAAIC,SAAUA,SAAW,EAEzBF,SAAQC,OAAO,YAAYE,SAAS,UAAWD,SCJ/CF,QAAQC,OAAO,YAAYG,UAAU,eAAgB,WAEjD,OAEIC,KAAM,SAASC,MAAOC,SAAUC,OAAQC,YACpC,GAAIC,YAAa,cACbC,cAAgB,iCAGhBC,MADSJ,OAAOK,SACTL,OAAOM,WAElBR,OAAMS,SAAU,EAEhBT,MAAMU,OAAO,cAAe,SAASC,MAAOC,UAExC,OAAQN,MAEJ,IAAK,QACDN,MAAMS,QAAmB,IAATE,OAAqBP,WAAWS,KAAKF,MACrD,MACJ,KAAK,WACDX,MAAMS,QAAmB,IAATE,OAAqBN,cAAcQ,KAAKF,MACxD,MACJ,KAAK,mBACDX,MAAMS,QAAmB,IAATE,OAAqBA,OAASX,MAAMc,mBASpEX,WAAY,SAASY,OAAQC,SAAUC,OAAQC,eAI/ClB,OACIQ,WAAY,IACZW,YAAa,IACbL,eAAgB,MAEpBM,YAAY,EACZC,YAAa,2CAIrB3B,QAAQC,OAAO,YAAY2B,QAAQ,cAAe,SAASC,WACvDC,KAAKC,SAAW,SAASC,IACrB,GAAIC,MAAOJ,UAAU,mCACjBK,KAAOD,KAAKE,KAAMC,IAAKJ,IAC3B,OAAOE,MAAKG,YAMpBrC,QAAQC,OAAO,YAAYqC,UAAU,YACjCX,YAAa,sCACblB,YAAa,SAAU,cAAe,UAAW,SAASY,OAAQkB,YAAaP,IAC3E,GAAIQ,MAAOV,IAGXU,MAAKC,qBAAuB,GAC5BD,KAAKE,OAAQ,EACbF,KAAKG,aAAc,EACnBH,KAAKI,iBAAkB,EACvBJ,KAAKK,aAAc,EACnBL,KAAKM,UAAY,GAEjBP,YAAYR,SAASC,IAAIe,KAAK,SAASb,MACnCM,KAAKN,KAAOA,KACZM,KAAKN,KAAKc,SAAW,KAIzBR,KAAKS,SAAW,WAgBZ,MAdAT,MAAKM,UAAY,WAEjBN,KAAKN,KAAKgB,QAAQH,KAAK,SAASI,IAE5BX,KAAKM,UAAY,YAEjBM,WAAW,WACP/B,OAAOgC,OAAO,WACVb,KAAKM,UAAY,MAGtB,QAGA","file":"settings.min.js","sourcesContent":["angular.module('settings', ['ngResource','ngAnimate']);\n\nvar USER_ID = USER_ID || '';\n\nangular.module('settings').constant('USER_ID', USER_ID );","angular.module('settings').directive('myValidation', function() {\n\n    return {\n\n        link: function(scope, iElement, iAttrs, controller) {\n            var floatRegex = /^\\d?\\.?\\d+$/;\n            var passwordRegex = /^(?!([a-zA-Z]+|\\d+)$)[\\S]{8,}$/;\n\n            var target = iAttrs.targetId;\n            var type = iAttrs.targetType;\n\n            scope.isLegal = true;\n\n            scope.$watch('targetValue', function(value, oldValue) {\n\n                switch (type) {\n\n                    case 'float':\n                        scope.isLegal = value == '' ? true : floatRegex.test(value);\n                        break;\n                    case 'password':\n                        scope.isLegal = value == '' ? true : passwordRegex.test(value);\n                        break;\n                    case 'password-confirm':\n                        scope.isLegal = value == '' ? true : value == scope.comparingValue;\n                        break;\n\n                }\n\n            });\n\n        },\n\n        controller: function($scope, $element, $attrs, $transclude) {\n\n\n        },\n        scope: {\n            targetType: '@',\n            targetValue: '@',\n            comparingValue: '@?'\n        },\n        transclude: true,\n        templateUrl: \"/js/settings/validation.template.html\"\n    }\n});\n\nangular.module('settings').service('userService', function($resource) {\n    this.findUser = function(id) {\n        var User = $resource('http://127.0.0.1:3000/user/:_id');\n        var user = User.get({ _id: id });\n        return user.$promise;\n    }\n\n});\n\n\nangular.module('settings').component('settings', {\n    templateUrl: '/js/settings/settings.template.html',\n    controller: ['$scope', 'userService', 'USER_ID', function($scope, userService, id) {\n        var self = this;\n\n\n        self.passwordConfirmation = '';\n        self.saved = false;\n        self.isLegalName = true;\n        self.isLegalPassword = true;\n        self.isConfirmed = true;\n        self.myClasses = '';\n\n        userService.findUser(id).then(function(user) {\n            self.user = user;\n            self.user.password = '';\n        });\n\n\n        self.saveUser = function() {\n\n            self.myClasses = 'isActive';\n\n            self.user.$save().then(function(rs) {\n\n                self.myClasses = 'isSuccess';\n\n                setTimeout(function() {\n                    $scope.$apply(function() {\n                        self.myClasses = '';\n                    });\n\n                }, 900)\n\n            });\n            return false;\n\n\n        }\n\n    }]\n});\n\n"]}