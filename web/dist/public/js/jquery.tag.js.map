{"version":3,"sources":["public/js/jquery.tag.js"],"names":["$","isTouch","document","documentElement","_on","fn","on","arguments","apply","this","$activeInput","$activeTag","settings","options","getTags","tags","addTag","newTag","indexOf","newTags","unshift","methods","inputClass","extend","defaults","bind","event","$active","$input","$label","itemName","next","find","val","addClass","oldVal","$hiddenTag","change","text","updateTag","remove","removeClass","isListActive","$target","activeElement","$nextTag","length","$prevTag","keyCode","$this","click","$nextInput","$tags","$first","closest","first","each","$activeLabel","tagVal","$tag","prev","offset","Array","forEach","focus","$ol","css","children","outerWidth","window","width","olHtml","item","left","top","append","method","after","_tags","isArray","tag","methodArguments","prototype","slice","_typeof","error","setTags","concat","jQuery"],"mappings":"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","file":"jquery.tag.js","sourcesContent":["(function($) {\n\n    var isTouch = ('ontouchend' in document.documentElement) ? 'touchend' : 'click';\n    var _on = $.fn.on;\n    $.fn.on = function() {\n        arguments[0] = (arguments[0] === 'click') ? isTouch : arguments[0];\n        return _on.apply(this, arguments);\n    };\n\n    var newTags = [];\n    var settings = {};\n    var $activeInput;\n    var $activeTag;\n\n    var methods = {\n\n        init: function(options) {\n\n            var defaults = {\n                inputClass: '.hidden-tag',\n                tags: []\n\n            };\n\n\n            if(options){\n                settings = $.extend({}, defaults, options);\n            }else{\n                settings = $.extend({}, defaults, settings);\n            }\n\n\n            //settings = $.extend({}, defaults, options);\n\n            function getTags() {\n\n                // var tags=Array.isArray($.fn.tag.list)?$.fn.tag.list:[];\n\n                return settings.tags;\n\n            }\n\n\n            function addTag(newTag) {\n                if (settings.tags.indexOf(newTag) >= 0);\n                else {\n                    settings.tags.unshift(newTag);\n                    newTags.unshift(newTag);\n                }\n            }\n\n            $(document).bind('click', function(event) {\n\n\n                var $active = $('.tag.isActive');\n                if ($active.length > 0) {\n                    var $input = $active.find('.tag-input');\n                    var $label = $active.find('.tag-label');\n                    var itemName = $active.next('.hidden-item').val();\n\n                    var val = $input.val();\n\n                    if (val == '') {\n                        $active.addClass('isEmpty');\n                    } else {\n                        $active.addClass('isLabel');\n                        addTag(val)\n                    }\n\n                    var $hiddenTag=$active.prev('.hidden-tag');\n\n                    var oldVal=$hiddenTag.val();\n\n                    $hiddenTag.val(val);\n                    $hiddenTag.change();\n\n                    $label.text(val);\n                    settings.updateTag(itemName,oldVal, val);\n\n                    $('.ol-tags').remove();\n\n                    $active.removeClass('isActive');\n\n                }\n\n                $('.ol-tags').remove();\n                isListActive=false;\n\n\n            });\n\n            var isListActive = false;\n\n            $(document).on('keydown', function(event) {\n\n                var $target = $(document.activeElement)\n\n                if ($target.hasClass('tag-input')) {\n\n\n                    if (!isListActive) {\n\n                        if (event.keyCode == 13) {\n                            $(document).click();\n                        } else if (event.keyCode == 40) {\n\n                            var $tags = $('.ol-tags > li');\n\n                            $nextInput = $target.closest('.orderitem').next('.orderitem').find('.tag-input');\n\n                            if ($tags.length > 0) {\n\n                                var $first = $tags.first();\n\n                                $first.addClass('isActive');\n                                isListActive = true;\n\n\n                            }\n\n\n                        }\n\n                    } else {\n\n                        $activeTag = $('.item--tag.isActive');\n\n                        if (event.keyCode == 38) {\n                            $prevTag = $activeTag.prev('.item--tag');\n\n                            if ($prevTag.length > 0) {\n                                $activeTag.removeClass('isActive');\n                                $prevTag.addClass('isActive');\n                            }\n\n\n                        } else if (event.keyCode == 40) {\n\n                            $nextTag = $activeTag.next('.item--tag');\n\n                            if ($nextTag.length > 0) {\n                                $activeTag.removeClass('isActive');\n                                $nextTag.addClass('isActive');\n                                $activeTag = $nextTag;\n                            }\n\n\n                        } else if (event.keyCode == 13) {\n                            isListActive=false;\n                            $activeTag.click();\n                        }\n                    }\n\n                }\n\n\n            });\n\n            return this.each(function() {\n\n                var $this = $(this);\n                var tagVal = $this.val();\n\n                var itemName = $this.next('.hidden-item').val();\n\n                var $tag = $(`<span class=\"tag\"><span class=\"tag-label\">${tagVal}</span><input type=\"text\" class=\"tag-input\" value=\"${tagVal}\"></span></span>`);\n\n                var $label = $tag.find('.tag-label')\n\n                var $input = $tag.find('.tag-input');\n\n                $label.bind('click', function() {\n\n\n                    var $active = $('.tag.isActive');\n                    if ($active.length > 0) {\n                        var $activeInput = $active.find('.tag-input');\n                        var $activeLabel = $active.find('.tag-label');\n\n                        var val = $activeInput.val();\n\n                        if (val == '') {\n                            $active.addClass('isEmpty');\n                        } else {\n                            $active.addClass('isLabel');\n                            addTag(val)\n                        }\n\n                        var $hiddenTag=$active.prev('.hidden-tag');\n\n                        var oldVal=$hiddenTag.val();\n\n                        $hiddenTag.val(val);\n                        $activeLabel.text(val);\n\n                        $hiddenTag.change();\n\n                        $active.removeClass('isActive');\n                        settings.updateTag(itemName, oldVal,val);\n                    }\n\n\n                    $tag.removeClass('isLabel isEmpty');\n\n                    $tag.addClass('isActive');\n\n                    $input.focus();\n\n                    return false;\n                });\n\n                $input.bind('focus', function() {\n\n                    var offset = $input.offset();\n                    var width = $input.outerWidth();\n\n                    $activeInput = $input;\n\n                    $('.ol-tags').remove();\n\n                    var tags = getTags();\n\n                    if (Array.isArray(tags) && tags.length > 0 && $(window).width() >420) {\n                        var olHtml = '<ol class=\"ol-tags\">'\n                        tags.forEach(function(item) {\n                            olHtml += `<li class=\"item--tag\">${item}</li>`;\n                        });\n                        olHtml += '</ol>';\n\n                        var $ol = $(olHtml);\n\n                        $ol.css('width', width);\n                        $ol.offset({ left: offset.left, top: offset.top + 18 });\n\n                        $ol.children('li').one('click', function() {\n                            var val = $(this).text();\n                            $input.val(val);\n                            $label.text(val);\n\n                            var oldVal=$this.val();\n\n                            $this.val(val);\n                            $this.change();\n\n\n                            settings.updateTag(itemName,oldVal, val);\n\n                            $tag.removeClass('isActive');\n                            $tag.addClass('isLabel');\n\n                            $('.ol-tags').remove();\n\n                            return false;\n\n                        });\n\n                        $('main').append($ol);\n                    }\n\n                    return false;\n\n\n\n                });\n\n                $input.bind('blur', function(event) {\n\n                    /*                        var val = $(this).val();\n                                            $label.val(val);\n                                            $this.val(val);*/\n\n                });\n\n\n                $this.after($tag);\n\n                if (tagVal != '') {\n                    $tag.addClass('isLabel');\n                } else {\n                    $tag.addClass('isEmpty');\n                }\n\n            });\n\n        }\n    };\n\n    $.fn.tag = function() {\n        var method = arguments[0];\n\n        if (methods[method]) {\n            method = methods[method];\n            var methodArguments = Array.prototype.slice(arguments, 1);\n        } else if (typeof(method) == 'object' || !method) {\n            method = methods['init'];\n            methodArguments=arguments;\n        } else {\n            $.error('method is not existed');\n        }\n\n        method.apply(this, methodArguments);\n    };\n\n    $.fn.tag.setTags = function(_tags) {\n        if (Array.isArray(_tags) && _tags.length > 0) {\n\n            var tags = _tags.concat([]);\n\n            newTags.forEach(function(item) {\n                if (tags.indexOf(item) < 0) {\n                    tags.unshift(item);\n                }\n\n            })\n\n            settings.tags = tags;\n\n        }\n\n    };\n\n    $.fn.tag.settings=settings;\n\n    //  $.fn.tag.se=settings.tags;\n\n\n\n})(jQuery);\n\n\n//$('.hidden-tag').tag();\n"]}