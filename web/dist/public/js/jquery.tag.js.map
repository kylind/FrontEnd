{"version":3,"sources":["public/js/jquery.tag.js"],"names":["$","isTouch","document","documentElement","_on","fn","on","arguments","apply","this","$activeInput","$activeTag","settings","options","getTags","tags","addTag","newTag","indexOf","newTags","unshift","methods","inputClass","extend","defaults","bind","event","$active","$input","$label","itemName","next","find","val","addClass","oldVal","$hiddenTag","change","text","updateTag","remove","removeClass","isListActive","$target","activeElement","keyCode","$prevTag","$nextTag","prev","length","click","$nextInput","$tags","closest","$first","first","each","$this","tagVal","$tag","$activeLabel","width","olHtml","$ol","offset","left","outerWidth","forEach","item","css","top","children","one","append","methodArguments","Array","prototype","after","isArray","_tags","concat","method","slice","_typeof","error","tag","setTags","jQuery"],"mappings":"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","file":"jquery.tag.js","sourcesContent":["(function($) {\n\n    var isTouch = ('ontouchend' in document.documentElement) ? 'touchend' : 'click';\n    var _on = $.fn.on;\n    $.fn.on = function() {\n        arguments[0] = (arguments[0] === 'click') ? isTouch : arguments[0];\n        return _on.apply(this, arguments);\n    };\n\n    var newTags = [];\n    var settings = {};\n    var $activeInput;\n    var $activeTag;\n\n    var methods = {\n\n        init: function(options) {\n\n            var defaults = {\n                inputClass: '.hidden-tag',\n                tags: []\n\n            };\n\n\n            if(options){\n                settings = $.extend({}, defaults, options);\n            }else{\n                settings = $.extend({}, defaults, settings);\n            }\n\n\n            //settings = $.extend({}, defaults, options);\n\n            function getTags() {\n\n                // var tags=Array.isArray($.fn.tag.list)?$.fn.tag.list:[];\n\n                return settings.tags;\n\n            }\n\n\n            function addTag(newTag) {\n                if (settings.tags.indexOf(newTag) >= 0);\n                else {\n                    settings.tags.unshift(newTag);\n                    newTags.unshift(newTag);\n                }\n            }\n\n            $(document).bind('click', function(event) {\n\n\n                var $active = $('.tag.isActive');\n                if ($active.length > 0) {\n                    var $input = $active.find('.tag-input');\n                    var $label = $active.find('.tag-label');\n                    var itemName = $active.next('.hidden-item').val();\n\n                    var val = $input.val();\n\n                    if (val == '') {\n                        $active.addClass('isEmpty');\n                    } else {\n                        $active.addClass('isLabel');\n                        addTag(val)\n                    }\n\n                    var $hiddenTag=$active.prev('hidden-tag');\n\n                    var oldVal=$hiddenTag.val();\n\n                    $hiddenTag.val(val);\n                    $hiddenTag.change();\n\n                    $label.text(val);\n                    settings.updateTag(itemName,oldVal, val);\n\n                    $('.ol-tags').remove();\n\n                    $active.removeClass('isActive');\n                    isListActive=false;\n                }\n\n\n            });\n\n            var isListActive = false;\n\n            $(document).on('keydown', function(event) {\n\n                var $target = $(document.activeElement)\n\n                if ($target.hasClass('tag-input')) {\n\n\n                    if (!isListActive) {\n\n                        if (event.keyCode == 13) {\n                            $(document).click();\n                        } else if (event.keyCode == 40) {\n\n                            var $tags = $('.ol-tags > li');\n\n                            $nextInput = $target.closest('.orderitem').next('.orderitem').find('.tag-input');\n\n                            if ($tags.length > 0) {\n\n                                var $first = $tags.first();\n\n                                $first.addClass('isActive');\n                                isListActive = true;\n\n\n                            }\n\n\n                        }\n\n                    } else {\n\n                        $activeTag = $('.item--tag.isActive');\n\n                        if (event.keyCode == 38) {\n                            $prevTag = $activeTag.prev('.item--tag');\n\n                            if ($prevTag.length > 0) {\n                                $activeTag.removeClass('isActive');\n                                $prevTag.addClass('isActive');\n                            }\n\n\n                        } else if (event.keyCode == 40) {\n\n                            $nextTag = $activeTag.next('.item--tag');\n\n                            if ($nextTag.length > 0) {\n                                $activeTag.removeClass('isActive');\n                                $nextTag.addClass('isActive');\n                                $activeTag = $nextTag;\n                            }\n\n\n                        } else if (event.keyCode == 13) {\n                            isListActive=false;\n                            $activeTag.click();\n                        }\n                    }\n\n                }\n\n\n            });\n\n            return this.each(function() {\n\n                var $this = $(this);\n                var tagVal = $this.val();\n\n                var itemName = $this.next('.hidden-item').val();\n\n                var $tag = $(`<span class=\"tag\"><span class=\"tag-label\">${tagVal}</span><input type=\"text\" class=\"tag-input\" value=\"${tagVal}\"></span></span>`);\n\n                var $label = $tag.find('.tag-label')\n\n                var $input = $tag.find('.tag-input');\n\n                $label.bind('click', function() {\n\n\n                    var $active = $('.tag.isActive');\n                    if ($active.length > 0) {\n                        var $activeInput = $active.find('.tag-input');\n                        var $activeLabel = $active.find('.tag-label');\n\n                        var val = $activeInput.val();\n\n                        if (val == '') {\n                            $active.addClass('isEmpty');\n                        } else {\n                            $active.addClass('isLabel');\n                            addTag(val)\n                        }\n\n                        var $hiddenTag=$active.prev('hidden-tag');\n\n                        var oldVal=$hiddenTag.val();\n\n                        $hiddenTag.val(val);\n                        $activeLabel.text(val);\n\n                        $hiddenTag.change();\n\n                        $active.removeClass('isActive');\n                        settings.updateTag(itemName, oldVal,val);\n                    }\n\n\n                    $tag.removeClass('isLabel isEmpty');\n\n                    $tag.addClass('isActive');\n\n                    $input.focus();\n\n                    return false;\n                });\n\n                $input.bind('focus', function() {\n\n                    var offset = $input.offset();\n                    var width = $input.outerWidth();\n\n                    $activeInput = $input;\n\n                    $('.ol-tags').remove();\n\n                    var tags = getTags();\n\n                    if (Array.isArray(tags) && tags.length > 0) {\n                        var olHtml = '<ol class=\"ol-tags\">'\n                        tags.forEach(function(item) {\n                            olHtml += `<li class=\"item--tag\">${item}</li>`;\n                        });\n                        olHtml += '</ol>';\n\n                        var $ol = $(olHtml);\n\n                        $ol.css('width', width);\n                        $ol.offset({ left: offset.left, top: offset.top + 18 });\n\n                        $ol.children('li').one('click', function() {\n                            var val = $(this).text();\n                            $input.val(val);\n                            $label.text(val);\n\n                            var oldVal=$this.val();\n\n                            $this.val(val);\n                            $this.change();\n\n\n                            settings.updateTag(itemName,oldVal, val);\n\n                            $tag.removeClass('isActive');\n                            $tag.addClass('isLabel');\n\n                            $('.ol-tags').remove();\n\n                            return false;\n\n                        });\n\n                        $('main').append($ol);\n                    }\n\n                    return false;\n\n\n\n                });\n\n                $input.bind('blur', function(event) {\n\n                    /*                        var val = $(this).val();\n                                            $label.val(val);\n                                            $this.val(val);*/\n\n                });\n\n\n                $this.after($tag);\n\n                if (tagVal != '') {\n                    $tag.addClass('isLabel');\n                } else {\n                    $tag.addClass('isEmpty');\n                }\n\n            });\n\n        }\n    };\n\n    $.fn.tag = function() {\n        var method = arguments[0];\n\n        if (methods[method]) {\n            method = methods[method];\n            var methodArguments = Array.prototype.slice(arguments, 1);\n        } else if (typeof(method) == 'object' || !method) {\n            method = methods['init'];\n            methodArguments=arguments;\n        } else {\n            $.error('method is not existed');\n        }\n\n        method.apply(this, methodArguments);\n    };\n\n    $.fn.tag.setTags = function(_tags) {\n        if (Array.isArray(_tags) && _tags.length > 0) {\n\n            var tags = _tags.concat([]);\n\n            newTags.forEach(function(item) {\n                if (tags.indexOf(item) < 0) {\n                    tags.unshift(item);\n                }\n\n            })\n\n            settings.tags = tags;\n\n        }\n\n    };\n\n    $.fn.tag.settings=settings;\n\n    //  $.fn.tag.se=settings.tags;\n\n\n\n})(jQuery);\n\n\n//$('.hidden-tag').tag();\n"]}